{"ast":null,"code":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.useLoadedNavigation=useLoadedNavigation;exports.useOptionalNavigation=useOptionalNavigation;const native_1=require(\"@react-navigation/native\");const react_1=require(\"react\");const router_store_1=require(\"../global-state/router-store\");function useLoadedNavigation(){const navigation=(0,native_1.useNavigation)();const isMounted=(0,react_1.useRef)(true);const pending=(0,react_1.useRef)([]);(0,react_1.useEffect)(()=>{isMounted.current=true;return()=>{isMounted.current=false;};},[]);const flush=(0,react_1.useCallback)(()=>{if(isMounted.current){const pendingCallbacks=pending.current;pending.current=[];pendingCallbacks.forEach(callback=>{callback(navigation);});}},[navigation]);(0,react_1.useEffect)(()=>{if(router_store_1.store.navigationRef.current){flush();}},[flush]);const push=(0,react_1.useCallback)(fn=>{pending.current.push(fn);if(router_store_1.store.navigationRef.current){flush();}},[flush]);return push;}function useOptionalNavigation(){const[navigation,setNavigation]=(0,react_1.useState)(null);const loadNavigation=useLoadedNavigation();(0,react_1.useEffect)(()=>{loadNavigation(nav=>setNavigation(nav));},[]);return navigation;}","map":{"version":3,"names":["exports","useLoadedNavigation","useOptionalNavigation","native_1","require","react_1","router_store_1","navigation","useNavigation","isMounted","useRef","pending","useEffect","current","flush","useCallback","pendingCallbacks","forEach","callback","store","navigationRef","push","fn","setNavigation","useState","loadNavigation","nav"],"sources":["/home/user/rork-vibesync-458/node_modules/expo-router/src/link/useLoadedNavigation.ts"],"sourcesContent":["import { NavigationProp, NavigationState, useNavigation } from '@react-navigation/native';\nimport { useCallback, useState, useEffect, useRef } from 'react';\n\nimport { store } from '../global-state/router-store';\n\ntype GenericNavigation = NavigationProp<ReactNavigation.RootParamList> & {\n  getState(): NavigationState | undefined;\n};\n\n/** Returns a callback which is invoked when the navigation state has loaded. */\nexport function useLoadedNavigation() {\n  const navigation = useNavigation();\n  const isMounted = useRef(true);\n  const pending = useRef<((navigation: GenericNavigation) => void)[]>([]);\n\n  useEffect(() => {\n    isMounted.current = true;\n    return () => {\n      isMounted.current = false;\n    };\n  }, []);\n\n  const flush = useCallback(() => {\n    if (isMounted.current) {\n      const pendingCallbacks = pending.current;\n      pending.current = [];\n      pendingCallbacks.forEach((callback) => {\n        callback(navigation as GenericNavigation);\n      });\n    }\n  }, [navigation]);\n\n  useEffect(() => {\n    if (store.navigationRef.current) {\n      flush();\n    }\n  }, [flush]);\n\n  const push = useCallback(\n    (fn: (navigation: GenericNavigation) => void) => {\n      pending.current.push(fn);\n      if (store.navigationRef.current) {\n        flush();\n      }\n    },\n    [flush]\n  );\n\n  return push;\n}\n\nexport function useOptionalNavigation(): GenericNavigation | null {\n  const [navigation, setNavigation] = useState<GenericNavigation | null>(null);\n  const loadNavigation = useLoadedNavigation();\n\n  useEffect(() => {\n    loadNavigation((nav) => setNavigation(nav));\n  }, []);\n\n  return navigation;\n}\n"],"mappings":"sEAUAA,OAAA,CAAAC,mBAAA,CAAAA,mBAAA,CAyCAD,OAAA,CAAAE,qBAAA,CAAAA,qBAAA,CAnDA,MAAAC,QAAA,CAAAC,OAAA,6BACA,MAAAC,OAAA,CAAAD,OAAA,UAEA,MAAAE,cAAA,CAAAF,OAAA,iCAOA,QAAgB,CAAAH,mBAAmBA,CAAA,EACjC,KAAM,CAAAM,UAAU,CAAG,GAAAJ,QAAA,CAAAK,aAAa,GAAE,CAClC,KAAM,CAAAC,SAAS,CAAG,GAAAJ,OAAA,CAAAK,MAAM,EAAC,IAAI,CAAC,CAC9B,KAAM,CAAAC,OAAO,CAAG,GAAAN,OAAA,CAAAK,MAAM,EAA8C,EAAE,CAAC,CAEvE,GAAAL,OAAA,CAAAO,SAAS,EAAC,IAAK,CACbH,SAAS,CAACI,OAAO,CAAG,IAAI,CACxB,MAAO,IAAK,CACVJ,SAAS,CAACI,OAAO,CAAG,KAAK,CAC3B,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAC,KAAK,CAAG,GAAAT,OAAA,CAAAU,WAAW,EAAC,IAAK,CAC7B,GAAIN,SAAS,CAACI,OAAO,CAAE,CACrB,KAAM,CAAAG,gBAAgB,CAAGL,OAAO,CAACE,OAAO,CACxCF,OAAO,CAACE,OAAO,CAAG,EAAE,CACpBG,gBAAgB,CAACC,OAAO,CAAEC,QAAQ,EAAI,CACpCA,QAAQ,CAACX,UAA+B,CAAC,CAC3C,CAAC,CAAC,CACJ,CACF,CAAC,CAAE,CAACA,UAAU,CAAC,CAAC,CAEhB,GAAAF,OAAA,CAAAO,SAAS,EAAC,IAAK,CACb,GAAIN,cAAA,CAAAa,KAAK,CAACC,aAAa,CAACP,OAAO,CAAE,CAC/BC,KAAK,EAAE,CACT,CACF,CAAC,CAAE,CAACA,KAAK,CAAC,CAAC,CAEX,KAAM,CAAAO,IAAI,CAAG,GAAAhB,OAAA,CAAAU,WAAW,EACrBO,EAA2C,EAAI,CAC9CX,OAAO,CAACE,OAAO,CAACQ,IAAI,CAACC,EAAE,CAAC,CACxB,GAAIhB,cAAA,CAAAa,KAAK,CAACC,aAAa,CAACP,OAAO,CAAE,CAC/BC,KAAK,EAAE,CACT,CACF,CAAC,CACD,CAACA,KAAK,CAAC,CACR,CAED,MAAO,CAAAO,IAAI,CACb,CAEA,QAAgB,CAAAnB,qBAAqBA,CAAA,EACnC,KAAM,CAACK,UAAU,CAAEgB,aAAa,CAAC,CAAG,GAAAlB,OAAA,CAAAmB,QAAQ,EAA2B,IAAI,CAAC,CAC5E,KAAM,CAAAC,cAAc,CAAGxB,mBAAmB,EAAE,CAE5C,GAAAI,OAAA,CAAAO,SAAS,EAAC,IAAK,CACba,cAAc,CAAEC,GAAG,EAAKH,aAAa,CAACG,GAAG,CAAC,CAAC,CAC7C,CAAC,CAAE,EAAE,CAAC,CAEN,MAAO,CAAAnB,UAAU,CACnB","ignoreList":[]},"metadata":{"hasCjsExports":true},"sourceType":"script","externalDependencies":[]}