{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Text from\"react-native-web/dist/exports/Text\";import View from\"react-native-web/dist/exports/View\";import FlatList from\"react-native-web/dist/exports/FlatList\";import TextInput from\"react-native-web/dist/exports/TextInput\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import KeyboardAvoidingView from\"react-native-web/dist/exports/KeyboardAvoidingView\";import Platform from\"react-native-web/dist/exports/Platform\";import Dimensions from\"react-native-web/dist/exports/Dimensions\";import{Stack,router,useLocalSearchParams}from'expo-router';import{useTheme}from'@/hooks/theme-store';import{useMessaging}from'@/hooks/messaging-store';import{useAuth}from'@/hooks/auth-store';import{Avatar}from'@/components/ui/Avatar';import{ArrowLeft,Camera,Mic,Image as ImageIcon,Heart,Info}from'lucide-react-native';import{ViewOnceComposer}from'@/components/messaging/ViewOnceComposer';import{ViewOnceMessage}from'@/components/messaging/ViewOnceMessage';import AsyncStorage from'@react-native-async-storage/async-storage';import{useSafeAreaInsets}from'react-native-safe-area-context';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const{width}=Dimensions.get('window');export default function ChatScreen(){const{id}=useLocalSearchParams();const{isAuthenticated,user}=useAuth();const{conversations,sendMessage,markMessageAsViewed,markMessageAsExpired,recordScreenshotAttempt}=useMessaging();const{colors,isDark}=useTheme();const insets=useSafeAreaInsets();const[messageText,setMessageText]=useState('');const[messages,setMessages]=useState([]);const[showViewOnceComposer,setShowViewOnceComposer]=useState(false);const[screenshotProtectionEnabled,setScreenshotProtectionEnabled]=useState(false);const flatListRef=useRef(null);const conversation=conversations.find(c=>c.id===id);const otherUser=conversation?.participants.find(p=>p.id!==user?.id)||conversation?.participants[0];useEffect(()=>{loadSettings();},[]);const loadSettings=async()=>{try{const stored=await AsyncStorage.getItem('@vibesync_settings');if(stored){const parsed=JSON.parse(stored);if(parsed.messaging?.screenshotProtection){setScreenshotProtectionEnabled(parsed.messaging.screenshotProtection);}}}catch(error){console.error('Error loading settings:',error);}};useEffect(()=>{if(!isAuthenticated){router.replace('/auth');return;}if(conversation){const mockMessages=[{id:'1',content:'Hey! How are you doing?',senderId:otherUser?.id||'other',recipientId:user?.id||'me',type:'text',timestamp:new Date(Date.now()-1000*60*30).toISOString(),isRead:true},{id:'2',content:'I\\'m good! Just listening to some music. What about you?',senderId:user?.id||'me',recipientId:otherUser?.id||'other',type:'text',timestamp:new Date(Date.now()-1000*60*25).toISOString(),isRead:true},{id:'3',content:'That sounds nice! What kind of music?',senderId:otherUser?.id||'other',recipientId:user?.id||'me',type:'text',timestamp:new Date(Date.now()-1000*60*20).toISOString(),isRead:true},{id:'4',content:'Check out this photo!',senderId:otherUser?.id||'other',recipientId:user?.id||'me',type:'image',timestamp:new Date(Date.now()-1000*60*10).toISOString(),isRead:false,isViewOnce:true,allowReplay:true,maxReplays:2,replayCount:0,mediaUrl:'https://images.unsplash.com/photo-1511671782779-c97d3d27a1d4?w=800'}];setMessages(mockMessages);}},[isAuthenticated,conversation,otherUser?.id,user?.id]);const handleSendMessage=async()=>{if(!messageText.trim()||!conversation)return;const newMessage={id:Date.now().toString(),content:messageText,senderId:user?.id||'me',recipientId:otherUser?.id||'other',type:'text',timestamp:new Date().toISOString(),isRead:false};setMessages(prev=>[...prev,newMessage]);setMessageText('');await sendMessage(conversation.id,messageText);};const handleSendViewOnce=async options=>{if(!conversation)return;const newMessage={id:Date.now().toString(),content:`View once ${options.type}`,senderId:user?.id||'me',recipientId:otherUser?.id||'other',type:options.type,timestamp:new Date().toISOString(),isRead:false,isViewOnce:true,allowReplay:options.allowReplay,maxReplays:options.maxReplays,replayCount:0,mediaUrl:'https://images.unsplash.com/photo-1511671782779-c97d3d27a1d4?w=800'};setMessages(prev=>[...prev,newMessage]);await sendMessage(conversation.id,newMessage.content,options.type,{isViewOnce:true,allowReplay:options.allowReplay,maxReplays:options.maxReplays,mediaUrl:newMessage.mediaUrl});};const handleViewMessage=messageId=>{markMessageAsViewed(messageId);};const handleExpireMessage=messageId=>{markMessageAsExpired(messageId);setMessages(prev=>prev.map(msg=>msg.id===messageId?Object.assign({},msg,{isExpired:true}):msg));};const formatTime=timestamp=>{const time=new Date(timestamp);return time.toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'});};const renderMessage=({item})=>{const isMyMessage=item.senderId===user?.id;if(item.isViewOnce){return _jsxs(View,{style:[styles.messageContainer,isMyMessage&&styles.myMessageContainer],children:[!isMyMessage&&_jsx(Avatar,{uri:otherUser?.profileImage,size:32,style:styles.messageAvatar}),_jsx(ViewOnceMessage,{message:item,onView:()=>handleViewMessage(item.id),onExpire:()=>handleExpireMessage(item.id),isMyMessage:isMyMessage})]});}return _jsxs(View,{style:[styles.messageContainer,isMyMessage&&styles.myMessageContainer],children:[!isMyMessage&&_jsx(Avatar,{uri:otherUser?.profileImage,size:32,style:styles.messageAvatar}),_jsxs(View,{style:[styles.messageBubble,isMyMessage?{backgroundColor:colors.primary}:{backgroundColor:colors.card}],children:[_jsx(Text,{style:[styles.messageText,{color:isMyMessage?'#FFFFFF':colors.text}],children:item.content}),_jsx(Text,{style:[styles.messageTime,{color:isMyMessage?'rgba(255,255,255,0.8)':colors.textSecondary}],children:formatTime(item.timestamp)})]})]});};const isOnline=true;if(!conversation||!otherUser){return _jsxs(View,{style:[styles.errorContainer,{backgroundColor:colors.background}],children:[_jsx(Text,{style:[styles.errorText,{color:colors.text}],children:\"Conversation not found\"}),_jsx(TouchableOpacity,{onPress:()=>router.back(),style:[styles.backButton,{backgroundColor:colors.primary}],children:_jsx(Text,{style:[styles.backButtonText,{color:colors.text}],children:\"Go Back\"})})]});}return _jsxs(KeyboardAvoidingView,{style:[styles.container,{backgroundColor:colors.background}],behavior:false?'padding':'height',children:[_jsx(Stack.Screen,{options:{headerShown:false}}),_jsxs(View,{style:[styles.header,{backgroundColor:colors.background,borderBottomColor:colors.border}],children:[_jsx(TouchableOpacity,{onPress:()=>router.back(),style:styles.backBtn,children:_jsx(ArrowLeft,{size:24,color:colors.text})}),_jsxs(TouchableOpacity,{style:styles.headerCenter,onPress:()=>router.push(`/user/${otherUser.id}`),children:[_jsx(Avatar,{uri:otherUser.profileImage,size:32}),_jsxs(View,{style:styles.userInfo,children:[_jsx(Text,{style:[styles.userName,{color:colors.text}],numberOfLines:1,children:otherUser.displayName}),isOnline&&_jsx(Text,{style:[styles.userStatus,{color:colors.textSecondary}],children:\"Active 5h ago\"})]})]}),_jsx(TouchableOpacity,{style:styles.infoBtn,onPress:()=>router.push('/messages-settings'),children:_jsx(Info,{size:24,color:colors.text})})]}),screenshotProtectionEnabled&&_jsx(View,{style:[styles.protectionBanner,{backgroundColor:colors.card}],children:_jsxs(Text,{style:[styles.protectionText,{color:colors.textSecondary}],children:[\"\\uD83D\\uDD12 New messages and calls are secured with end-to-end encryption. Only people in this chat can read, listen to, or share them. \",_jsx(Text,{style:{color:colors.primary},children:\"Learn more.\"})]})}),_jsx(FlatList,{data:messages,keyExtractor:item=>item.id,renderItem:renderMessage,style:styles.messagesList,contentContainerStyle:styles.messagesContainer,showsVerticalScrollIndicator:false}),_jsxs(View,{style:[styles.inputContainer,{backgroundColor:colors.background,borderTopColor:colors.border,paddingBottom:Math.max(insets.bottom,8)}],children:[_jsx(TouchableOpacity,{style:styles.inputIcon,onPress:()=>{},children:_jsx(Camera,{size:24,color:colors.primary})}),_jsx(View,{style:[styles.inputWrapper,{backgroundColor:colors.card,borderColor:colors.border}],children:_jsx(TextInput,{style:[styles.messageInput,{color:colors.text}],value:messageText,onChangeText:setMessageText,placeholder:\"Message\",placeholderTextColor:colors.textSecondary,multiline:true,maxLength:1000})}),_jsx(TouchableOpacity,{style:styles.inputIcon,onPress:()=>{},children:_jsx(Mic,{size:24,color:colors.primary})}),_jsx(TouchableOpacity,{style:styles.inputIcon,onPress:()=>{},children:_jsx(ImageIcon,{size:24,color:colors.primary})}),messageText.trim()?_jsx(TouchableOpacity,{onPress:handleSendMessage,children:_jsx(Text,{style:[styles.sendText,{color:colors.primary}],children:\"Send\"})}):_jsx(TouchableOpacity,{style:styles.inputIcon,onPress:()=>{},children:_jsx(Heart,{size:24,color:colors.primary})})]}),_jsx(ViewOnceComposer,{visible:showViewOnceComposer,onClose:()=>setShowViewOnceComposer(false),onSend:handleSendViewOnce})]});}const styles=StyleSheet.create({container:{flex:1},errorContainer:{flex:1,justifyContent:'center',alignItems:'center',padding:20},errorText:{fontSize:18,marginBottom:20},backButton:{paddingVertical:12,paddingHorizontal:24,borderRadius:24},backButtonText:{fontSize:16,fontWeight:'600'},header:{flexDirection:'row',alignItems:'center',justifyContent:'space-between',paddingHorizontal:12,paddingTop:60,paddingBottom:12,borderBottomWidth:0.5},backBtn:{padding:8},headerCenter:{flex:1,flexDirection:'row',alignItems:'center',marginLeft:8,gap:12},userInfo:{flex:1},userName:{fontSize:16,fontWeight:'600'},userStatus:{fontSize:12,marginTop:2},infoBtn:{padding:8},messagesList:{flex:1},messagesContainer:{padding:16},messageContainer:{flexDirection:'row',marginBottom:16,alignItems:'flex-end'},myMessageContainer:{justifyContent:'flex-end'},messageAvatar:{marginRight:8},messageBubble:{maxWidth:'75%',padding:12,borderRadius:16},messageText:{fontSize:16,lineHeight:20},messageTime:{fontSize:12,marginTop:4},inputContainer:{flexDirection:'row',alignItems:'center',paddingHorizontal:12,paddingVertical:8,borderTopWidth:0.5,gap:12},inputWrapper:{flex:1,borderRadius:20,paddingHorizontal:16,paddingVertical:8,minHeight:36,maxHeight:100,justifyContent:'center',borderWidth:1},messageInput:{fontSize:15,lineHeight:20,minHeight:20,maxHeight:84,paddingTop:0,paddingBottom:0},inputIcon:{padding:4},sendText:{fontSize:16,fontWeight:'600'},protectionBanner:{paddingVertical:12,paddingHorizontal:16},protectionText:{fontSize:12,lineHeight:16,textAlign:'center'}});","map":{"version":3,"names":["React","useState","useEffect","useRef","StyleSheet","Text","View","FlatList","TextInput","TouchableOpacity","KeyboardAvoidingView","Platform","Dimensions","Stack","router","useLocalSearchParams","useTheme","useMessaging","useAuth","Avatar","ArrowLeft","Camera","Mic","Image","ImageIcon","Heart","Info","ViewOnceComposer","ViewOnceMessage","AsyncStorage","useSafeAreaInsets","jsx","_jsx","jsxs","_jsxs","width","get","ChatScreen","id","isAuthenticated","user","conversations","sendMessage","markMessageAsViewed","markMessageAsExpired","recordScreenshotAttempt","colors","isDark","insets","messageText","setMessageText","messages","setMessages","showViewOnceComposer","setShowViewOnceComposer","screenshotProtectionEnabled","setScreenshotProtectionEnabled","flatListRef","conversation","find","c","otherUser","participants","p","loadSettings","stored","getItem","parsed","JSON","parse","messaging","screenshotProtection","error","console","replace","mockMessages","content","senderId","recipientId","type","timestamp","Date","now","toISOString","isRead","isViewOnce","allowReplay","maxReplays","replayCount","mediaUrl","handleSendMessage","trim","newMessage","toString","prev","handleSendViewOnce","options","handleViewMessage","messageId","handleExpireMessage","map","msg","Object","assign","isExpired","formatTime","time","toLocaleTimeString","hour","minute","renderMessage","item","isMyMessage","style","styles","messageContainer","myMessageContainer","children","uri","profileImage","size","messageAvatar","message","onView","onExpire","messageBubble","backgroundColor","primary","card","color","text","messageTime","textSecondary","isOnline","errorContainer","background","errorText","onPress","back","backButton","backButtonText","container","behavior","Screen","headerShown","header","borderBottomColor","border","backBtn","headerCenter","push","userInfo","userName","numberOfLines","displayName","userStatus","infoBtn","protectionBanner","protectionText","data","keyExtractor","renderItem","messagesList","contentContainerStyle","messagesContainer","showsVerticalScrollIndicator","inputContainer","borderTopColor","paddingBottom","Math","max","bottom","inputIcon","inputWrapper","borderColor","messageInput","value","onChangeText","placeholder","placeholderTextColor","multiline","maxLength","sendText","visible","onClose","onSend","create","flex","justifyContent","alignItems","padding","fontSize","marginBottom","paddingVertical","paddingHorizontal","borderRadius","fontWeight","flexDirection","paddingTop","borderBottomWidth","marginLeft","gap","marginTop","marginRight","maxWidth","lineHeight","borderTopWidth","minHeight","maxHeight","borderWidth","textAlign"],"sources":["/home/user/rork-vibesync-458/app/chat/[id].tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { StyleSheet, Text, View, FlatList, TextInput, TouchableOpacity, KeyboardAvoidingView, Platform, Dimensions } from 'react-native';\nimport { Stack, router, useLocalSearchParams } from 'expo-router';\nimport { useTheme } from '@/hooks/theme-store';\nimport { useMessaging } from '@/hooks/messaging-store';\nimport { useAuth } from '@/hooks/auth-store';\nimport { Avatar } from '@/components/ui/Avatar';\nimport { Send, ArrowLeft, Camera, Mic, Image as ImageIcon, Heart, Info } from 'lucide-react-native';\nimport { Message } from '@/types';\nimport { ViewOnceComposer, ViewOnceOptions } from '@/components/messaging/ViewOnceComposer';\nimport { ViewOnceMessage } from '@/components/messaging/ViewOnceMessage';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\n\nconst { width } = Dimensions.get('window');\n\nexport default function ChatScreen() {\n  const { id } = useLocalSearchParams<{ id: string }>();\n  const { isAuthenticated, user } = useAuth();\n  const { conversations, sendMessage, markMessageAsViewed, markMessageAsExpired, recordScreenshotAttempt } = useMessaging();\n  const { colors, isDark } = useTheme();\n  const insets = useSafeAreaInsets();\n  const [messageText, setMessageText] = useState('');\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [showViewOnceComposer, setShowViewOnceComposer] = useState(false);\n  const [screenshotProtectionEnabled, setScreenshotProtectionEnabled] = useState(false);\n  const flatListRef = useRef<FlatList>(null);\n  \n  const conversation = conversations.find(c => c.id === id);\n  const otherUser = conversation?.participants.find(p => p.id !== user?.id) || conversation?.participants[0];\n\n\n\n  useEffect(() => {\n    loadSettings();\n  }, []);\n\n  const loadSettings = async () => {\n    try {\n      const stored = await AsyncStorage.getItem('@vibesync_settings');\n      if (stored) {\n        const parsed = JSON.parse(stored);\n        if (parsed.messaging?.screenshotProtection) {\n          setScreenshotProtectionEnabled(parsed.messaging.screenshotProtection);\n        }\n      }\n    } catch (error) {\n      console.error('Error loading settings:', error);\n    }\n  };\n\n  useEffect(() => {\n    if (!isAuthenticated) {\n      router.replace('/auth');\n      return;\n    }\n    \n    if (conversation) {\n      const mockMessages: Message[] = [\n        {\n          id: '1',\n          content: 'Hey! How are you doing?',\n          senderId: otherUser?.id || 'other',\n          recipientId: user?.id || 'me',\n          type: 'text',\n          timestamp: new Date(Date.now() - 1000 * 60 * 30).toISOString(),\n          isRead: true,\n        },\n        {\n          id: '2',\n          content: 'I\\'m good! Just listening to some music. What about you?',\n          senderId: user?.id || 'me',\n          recipientId: otherUser?.id || 'other',\n          type: 'text',\n          timestamp: new Date(Date.now() - 1000 * 60 * 25).toISOString(),\n          isRead: true,\n        },\n        {\n          id: '3',\n          content: 'That sounds nice! What kind of music?',\n          senderId: otherUser?.id || 'other',\n          recipientId: user?.id || 'me',\n          type: 'text',\n          timestamp: new Date(Date.now() - 1000 * 60 * 20).toISOString(),\n          isRead: true,\n        },\n        {\n          id: '4',\n          content: 'Check out this photo!',\n          senderId: otherUser?.id || 'other',\n          recipientId: user?.id || 'me',\n          type: 'image',\n          timestamp: new Date(Date.now() - 1000 * 60 * 10).toISOString(),\n          isRead: false,\n          isViewOnce: true,\n          allowReplay: true,\n          maxReplays: 2,\n          replayCount: 0,\n          mediaUrl: 'https://images.unsplash.com/photo-1511671782779-c97d3d27a1d4?w=800',\n        },\n      ];\n      setMessages(mockMessages);\n    }\n  }, [isAuthenticated, conversation, otherUser?.id, user?.id]);\n\n  const handleSendMessage = async () => {\n    if (!messageText.trim() || !conversation) return;\n    \n    const newMessage: Message = {\n      id: Date.now().toString(),\n      content: messageText,\n      senderId: user?.id || 'me',\n      recipientId: otherUser?.id || 'other',\n      type: 'text',\n      timestamp: new Date().toISOString(),\n      isRead: false,\n    };\n    \n    setMessages(prev => [...prev, newMessage]);\n    setMessageText('');\n    \n    await sendMessage(conversation.id, messageText);\n  };\n\n  const handleSendViewOnce = async (options: ViewOnceOptions) => {\n    if (!conversation) return;\n\n    const newMessage: Message = {\n      id: Date.now().toString(),\n      content: `View once ${options.type}`,\n      senderId: user?.id || 'me',\n      recipientId: otherUser?.id || 'other',\n      type: options.type,\n      timestamp: new Date().toISOString(),\n      isRead: false,\n      isViewOnce: true,\n      allowReplay: options.allowReplay,\n      maxReplays: options.maxReplays,\n      replayCount: 0,\n      mediaUrl: 'https://images.unsplash.com/photo-1511671782779-c97d3d27a1d4?w=800',\n    };\n\n    setMessages(prev => [...prev, newMessage]);\n\n    await sendMessage(conversation.id, newMessage.content, options.type, {\n      isViewOnce: true,\n      allowReplay: options.allowReplay,\n      maxReplays: options.maxReplays,\n      mediaUrl: newMessage.mediaUrl,\n    });\n  };\n\n  const handleViewMessage = (messageId: string) => {\n    markMessageAsViewed(messageId);\n  };\n\n  const handleExpireMessage = (messageId: string) => {\n    markMessageAsExpired(messageId);\n    setMessages(prev => prev.map(msg => \n      msg.id === messageId ? { ...msg, isExpired: true } : msg\n    ));\n  };\n\n  const formatTime = (timestamp: string) => {\n    const time = new Date(timestamp);\n    return time.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\n  };\n\n  const renderMessage = ({ item }: { item: Message }) => {\n    const isMyMessage = item.senderId === user?.id;\n    \n    if (item.isViewOnce) {\n      return (\n        <View style={[styles.messageContainer, isMyMessage && styles.myMessageContainer]}>\n          {!isMyMessage && (\n            <Avatar\n              uri={otherUser?.profileImage}\n              size={32}\n              style={styles.messageAvatar}\n            />\n          )}\n          <ViewOnceMessage\n            message={item}\n            onView={() => handleViewMessage(item.id)}\n            onExpire={() => handleExpireMessage(item.id)}\n            isMyMessage={isMyMessage}\n          />\n        </View>\n      );\n    }\n    \n    return (\n      <View style={[styles.messageContainer, isMyMessage && styles.myMessageContainer]}>\n        {!isMyMessage && (\n          <Avatar\n            uri={otherUser?.profileImage}\n            size={32}\n            style={styles.messageAvatar}\n          />\n        )}\n        <View style={[\n          styles.messageBubble, \n          isMyMessage ? \n            { backgroundColor: colors.primary } : \n            { backgroundColor: colors.card }\n        ]}>\n          <Text style={[styles.messageText, { color: isMyMessage ? '#FFFFFF' : colors.text }]}>\n            {item.content}\n          </Text>\n          <Text style={[\n            styles.messageTime, \n            { color: isMyMessage ? 'rgba(255,255,255,0.8)' : colors.textSecondary }\n          ]}>\n            {formatTime(item.timestamp)}\n          </Text>\n        </View>\n      </View>\n    );\n  };\n\n  const isOnline = true;\n\n  if (!conversation || !otherUser) {\n    return (\n      <View style={[styles.errorContainer, { backgroundColor: colors.background }]}>\n        <Text style={[styles.errorText, { color: colors.text }]}>Conversation not found</Text>\n        <TouchableOpacity onPress={() => router.back()} style={[styles.backButton, { backgroundColor: colors.primary }]}>\n          <Text style={[styles.backButtonText, { color: colors.text }]}>Go Back</Text>\n        </TouchableOpacity>\n      </View>\n    );\n  }\n\n  return (\n    <KeyboardAvoidingView \n      style={[styles.container, { backgroundColor: colors.background }]} \n      behavior={Platform.OS === 'ios' ? 'padding' : 'height'}\n    >\n      <Stack.Screen \n        options={{ \n          headerShown: false,\n        }} \n      />\n\n      {/* Instagram-style Header */}\n      <View style={[styles.header, { backgroundColor: colors.background, borderBottomColor: colors.border }]}>\n        <TouchableOpacity \n          onPress={() => router.back()}\n          style={styles.backBtn}\n        >\n          <ArrowLeft size={24} color={colors.text} />\n        </TouchableOpacity>\n\n        <TouchableOpacity \n          style={styles.headerCenter}\n          onPress={() => router.push(`/user/${otherUser.id}`)}\n        >\n          <Avatar\n            uri={otherUser.profileImage}\n            size={32}\n          />\n          <View style={styles.userInfo}>\n            <Text style={[styles.userName, { color: colors.text }]} numberOfLines={1}>\n              {otherUser.displayName}\n            </Text>\n            {isOnline && (\n              <Text style={[styles.userStatus, { color: colors.textSecondary }]}>\n                Active 5h ago\n              </Text>\n            )}\n          </View>\n        </TouchableOpacity>\n\n        <TouchableOpacity \n          style={styles.infoBtn}\n          onPress={() => router.push('/messages-settings')}\n        >\n          <Info size={24} color={colors.text} />\n        </TouchableOpacity>\n      </View>\n      \n      {screenshotProtectionEnabled && (\n        <View style={[styles.protectionBanner, { backgroundColor: colors.card }]}>\n          <Text style={[styles.protectionText, { color: colors.textSecondary }]}>\n            ðŸ”’ New messages and calls are secured with end-to-end encryption. Only people in this chat can read, listen to, or share them. <Text style={{ color: colors.primary }}>Learn more.</Text>\n          </Text>\n        </View>\n      )}\n\n      <FlatList\n        data={messages}\n        keyExtractor={(item) => item.id}\n        renderItem={renderMessage}\n        style={styles.messagesList}\n        contentContainerStyle={styles.messagesContainer}\n        showsVerticalScrollIndicator={false}\n      />\n\n      \n      {/* Instagram-style Input Area */}\n      <View style={[styles.inputContainer, { backgroundColor: colors.background, borderTopColor: colors.border, paddingBottom: Math.max(insets.bottom, 8) }]}>\n        <TouchableOpacity style={styles.inputIcon} onPress={() => {}}>\n          <Camera size={24} color={colors.primary} />\n        </TouchableOpacity>\n\n        <View style={[styles.inputWrapper, { backgroundColor: colors.card, borderColor: colors.border }]}>\n          <TextInput\n            style={[styles.messageInput, { color: colors.text }]}\n            value={messageText}\n            onChangeText={setMessageText}\n            placeholder=\"Message\"\n            placeholderTextColor={colors.textSecondary}\n            multiline\n            maxLength={1000}\n          />\n        </View>\n\n        <TouchableOpacity style={styles.inputIcon} onPress={() => {}}>\n          <Mic size={24} color={colors.primary} />\n        </TouchableOpacity>\n\n        <TouchableOpacity style={styles.inputIcon} onPress={() => {}}>\n          <ImageIcon size={24} color={colors.primary} />\n        </TouchableOpacity>\n\n        {messageText.trim() ? (\n          <TouchableOpacity\n            onPress={handleSendMessage}\n          >\n            <Text style={[styles.sendText, { color: colors.primary }]}>Send</Text>\n          </TouchableOpacity>\n        ) : (\n          <TouchableOpacity style={styles.inputIcon} onPress={() => {}}>\n            <Heart size={24} color={colors.primary} />\n          </TouchableOpacity>\n        )}\n      </View>\n\n      <ViewOnceComposer\n        visible={showViewOnceComposer}\n        onClose={() => setShowViewOnceComposer(false)}\n        onSend={handleSendViewOnce}\n      />\n    </KeyboardAvoidingView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  errorContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20,\n  },\n  errorText: {\n    fontSize: 18,\n    marginBottom: 20,\n  },\n  backButton: {\n    paddingVertical: 12,\n    paddingHorizontal: 24,\n    borderRadius: 24,\n  },\n  backButtonText: {\n    fontSize: 16,\n    fontWeight: '600' as const,\n  },\n  header: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    paddingHorizontal: 12,\n    paddingTop: 60,\n    paddingBottom: 12,\n    borderBottomWidth: 0.5,\n  },\n  backBtn: {\n    padding: 8,\n  },\n  headerCenter: {\n    flex: 1,\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginLeft: 8,\n    gap: 12,\n  },\n  userInfo: {\n    flex: 1,\n  },\n  userName: {\n    fontSize: 16,\n    fontWeight: '600' as const,\n  },\n  userStatus: {\n    fontSize: 12,\n    marginTop: 2,\n  },\n  infoBtn: {\n    padding: 8,\n  },\n  messagesList: {\n    flex: 1,\n  },\n  messagesContainer: {\n    padding: 16,\n  },\n  messageContainer: {\n    flexDirection: 'row',\n    marginBottom: 16,\n    alignItems: 'flex-end',\n  },\n  myMessageContainer: {\n    justifyContent: 'flex-end',\n  },\n  messageAvatar: {\n    marginRight: 8,\n  },\n  messageBubble: {\n    maxWidth: '75%',\n    padding: 12,\n    borderRadius: 16,\n  },\n  messageText: {\n    fontSize: 16,\n    lineHeight: 20,\n  },\n  messageTime: {\n    fontSize: 12,\n    marginTop: 4,\n  },\n\n  inputContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: 12,\n    paddingVertical: 8,\n    borderTopWidth: 0.5,\n    gap: 12,\n  },\n  inputWrapper: {\n    flex: 1,\n    borderRadius: 20,\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    minHeight: 36,\n    maxHeight: 100,\n    justifyContent: 'center',\n    borderWidth: 1,\n  },\n  messageInput: {\n    fontSize: 15,\n    lineHeight: 20,\n    minHeight: 20,\n    maxHeight: 84,\n    paddingTop: 0,\n    paddingBottom: 0,\n  },\n  inputIcon: {\n    padding: 4,\n  },\n  sendText: {\n    fontSize: 16,\n    fontWeight: '600' as const,\n  },\n  protectionBanner: {\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n  },\n  protectionText: {\n    fontSize: 12,\n    lineHeight: 16,\n    textAlign: 'center',\n  },\n});"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,MAAM,KAAQ,OAAO,CAAC,OAAAC,UAAA,uDAAAC,IAAA,iDAAAC,IAAA,iDAAAC,QAAA,qDAAAC,SAAA,sDAAAC,gBAAA,6DAAAC,oBAAA,iEAAAC,QAAA,qDAAAC,UAAA,gDAE3D,OAASC,KAAK,CAAEC,MAAM,CAAEC,oBAAoB,KAAQ,aAAa,CACjE,OAASC,QAAQ,KAAQ,qBAAqB,CAC9C,OAASC,YAAY,KAAQ,yBAAyB,CACtD,OAASC,OAAO,KAAQ,oBAAoB,CAC5C,OAASC,MAAM,KAAQ,wBAAwB,CAC/C,OAAeC,SAAS,CAAEC,MAAM,CAAEC,GAAG,CAAEC,KAAK,GAAI,CAAAC,SAAS,CAAEC,KAAK,CAAEC,IAAI,KAAQ,qBAAqB,CAEnG,OAASC,gBAAgB,KAAyB,yCAAyC,CAC3F,OAASC,eAAe,KAAQ,wCAAwC,CACxE,MAAO,CAAAC,YAAY,KAAM,2CAA2C,CACpE,OAASC,iBAAiB,KAAQ,gCAAgC,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEnE,KAAM,CAAEC,KAAM,CAAC,CAAGvB,UAAU,CAACwB,GAAG,CAAC,QAAQ,CAAC,CAE1C,cAAe,SAAS,CAAAC,UAAUA,CAAA,CAAG,CACnC,KAAM,CAAEC,EAAG,CAAC,CAAGvB,oBAAoB,CAAiB,CAAC,CACrD,KAAM,CAAEwB,eAAe,CAAEC,IAAK,CAAC,CAAGtB,OAAO,CAAC,CAAC,CAC3C,KAAM,CAAEuB,aAAa,CAAEC,WAAW,CAAEC,mBAAmB,CAAEC,oBAAoB,CAAEC,uBAAwB,CAAC,CAAG5B,YAAY,CAAC,CAAC,CACzH,KAAM,CAAE6B,MAAM,CAAEC,MAAO,CAAC,CAAG/B,QAAQ,CAAC,CAAC,CACrC,KAAM,CAAAgC,MAAM,CAAGlB,iBAAiB,CAAC,CAAC,CAClC,KAAM,CAACmB,WAAW,CAAEC,cAAc,CAAC,CAAGjD,QAAQ,CAAC,EAAE,CAAC,CAClD,KAAM,CAACkD,QAAQ,CAAEC,WAAW,CAAC,CAAGnD,QAAQ,CAAY,EAAE,CAAC,CACvD,KAAM,CAACoD,oBAAoB,CAAEC,uBAAuB,CAAC,CAAGrD,QAAQ,CAAC,KAAK,CAAC,CACvE,KAAM,CAACsD,2BAA2B,CAAEC,8BAA8B,CAAC,CAAGvD,QAAQ,CAAC,KAAK,CAAC,CACrF,KAAM,CAAAwD,WAAW,CAAGtD,MAAM,CAAW,IAAI,CAAC,CAE1C,KAAM,CAAAuD,YAAY,CAAGjB,aAAa,CAACkB,IAAI,CAACC,CAAC,EAAIA,CAAC,CAACtB,EAAE,GAAKA,EAAE,CAAC,CACzD,KAAM,CAAAuB,SAAS,CAAGH,YAAY,EAAEI,YAAY,CAACH,IAAI,CAACI,CAAC,EAAIA,CAAC,CAACzB,EAAE,GAAKE,IAAI,EAAEF,EAAE,CAAC,EAAIoB,YAAY,EAAEI,YAAY,CAAC,CAAC,CAAC,CAI1G5D,SAAS,CAAC,IAAM,CACd8D,YAAY,CAAC,CAAC,CAChB,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAA,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CACF,KAAM,CAAAC,MAAM,CAAG,KAAM,CAAApC,YAAY,CAACqC,OAAO,CAAC,oBAAoB,CAAC,CAC/D,GAAID,MAAM,CAAE,CACV,KAAM,CAAAE,MAAM,CAAGC,IAAI,CAACC,KAAK,CAACJ,MAAM,CAAC,CACjC,GAAIE,MAAM,CAACG,SAAS,EAAEC,oBAAoB,CAAE,CAC1Cf,8BAA8B,CAACW,MAAM,CAACG,SAAS,CAACC,oBAAoB,CAAC,CACvE,CACF,CACF,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,yBAAyB,CAAEA,KAAK,CAAC,CACjD,CACF,CAAC,CAEDtE,SAAS,CAAC,IAAM,CACd,GAAI,CAACqC,eAAe,CAAE,CACpBzB,MAAM,CAAC4D,OAAO,CAAC,OAAO,CAAC,CACvB,OACF,CAEA,GAAIhB,YAAY,CAAE,CAChB,KAAM,CAAAiB,YAAuB,CAAG,CAC9B,CACErC,EAAE,CAAE,GAAG,CACPsC,OAAO,CAAE,yBAAyB,CAClCC,QAAQ,CAAEhB,SAAS,EAAEvB,EAAE,EAAI,OAAO,CAClCwC,WAAW,CAAEtC,IAAI,EAAEF,EAAE,EAAI,IAAI,CAC7ByC,IAAI,CAAE,MAAM,CACZC,SAAS,CAAE,GAAI,CAAAC,IAAI,CAACA,IAAI,CAACC,GAAG,CAAC,CAAC,CAAG,IAAI,CAAG,EAAE,CAAG,EAAE,CAAC,CAACC,WAAW,CAAC,CAAC,CAC9DC,MAAM,CAAE,IACV,CAAC,CACD,CACE9C,EAAE,CAAE,GAAG,CACPsC,OAAO,CAAE,0DAA0D,CACnEC,QAAQ,CAAErC,IAAI,EAAEF,EAAE,EAAI,IAAI,CAC1BwC,WAAW,CAAEjB,SAAS,EAAEvB,EAAE,EAAI,OAAO,CACrCyC,IAAI,CAAE,MAAM,CACZC,SAAS,CAAE,GAAI,CAAAC,IAAI,CAACA,IAAI,CAACC,GAAG,CAAC,CAAC,CAAG,IAAI,CAAG,EAAE,CAAG,EAAE,CAAC,CAACC,WAAW,CAAC,CAAC,CAC9DC,MAAM,CAAE,IACV,CAAC,CACD,CACE9C,EAAE,CAAE,GAAG,CACPsC,OAAO,CAAE,uCAAuC,CAChDC,QAAQ,CAAEhB,SAAS,EAAEvB,EAAE,EAAI,OAAO,CAClCwC,WAAW,CAAEtC,IAAI,EAAEF,EAAE,EAAI,IAAI,CAC7ByC,IAAI,CAAE,MAAM,CACZC,SAAS,CAAE,GAAI,CAAAC,IAAI,CAACA,IAAI,CAACC,GAAG,CAAC,CAAC,CAAG,IAAI,CAAG,EAAE,CAAG,EAAE,CAAC,CAACC,WAAW,CAAC,CAAC,CAC9DC,MAAM,CAAE,IACV,CAAC,CACD,CACE9C,EAAE,CAAE,GAAG,CACPsC,OAAO,CAAE,uBAAuB,CAChCC,QAAQ,CAAEhB,SAAS,EAAEvB,EAAE,EAAI,OAAO,CAClCwC,WAAW,CAAEtC,IAAI,EAAEF,EAAE,EAAI,IAAI,CAC7ByC,IAAI,CAAE,OAAO,CACbC,SAAS,CAAE,GAAI,CAAAC,IAAI,CAACA,IAAI,CAACC,GAAG,CAAC,CAAC,CAAG,IAAI,CAAG,EAAE,CAAG,EAAE,CAAC,CAACC,WAAW,CAAC,CAAC,CAC9DC,MAAM,CAAE,KAAK,CACbC,UAAU,CAAE,IAAI,CAChBC,WAAW,CAAE,IAAI,CACjBC,UAAU,CAAE,CAAC,CACbC,WAAW,CAAE,CAAC,CACdC,QAAQ,CAAE,oEACZ,CAAC,CACF,CACDrC,WAAW,CAACuB,YAAY,CAAC,CAC3B,CACF,CAAC,CAAE,CAACpC,eAAe,CAAEmB,YAAY,CAAEG,SAAS,EAAEvB,EAAE,CAAEE,IAAI,EAAEF,EAAE,CAAC,CAAC,CAE5D,KAAM,CAAAoD,iBAAiB,CAAG,KAAAA,CAAA,GAAY,CACpC,GAAI,CAACzC,WAAW,CAAC0C,IAAI,CAAC,CAAC,EAAI,CAACjC,YAAY,CAAE,OAE1C,KAAM,CAAAkC,UAAmB,CAAG,CAC1BtD,EAAE,CAAE2C,IAAI,CAACC,GAAG,CAAC,CAAC,CAACW,QAAQ,CAAC,CAAC,CACzBjB,OAAO,CAAE3B,WAAW,CACpB4B,QAAQ,CAAErC,IAAI,EAAEF,EAAE,EAAI,IAAI,CAC1BwC,WAAW,CAAEjB,SAAS,EAAEvB,EAAE,EAAI,OAAO,CACrCyC,IAAI,CAAE,MAAM,CACZC,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAC,CAACE,WAAW,CAAC,CAAC,CACnCC,MAAM,CAAE,KACV,CAAC,CAEDhC,WAAW,CAAC0C,IAAI,EAAI,CAAC,GAAGA,IAAI,CAAEF,UAAU,CAAC,CAAC,CAC1C1C,cAAc,CAAC,EAAE,CAAC,CAElB,KAAM,CAAAR,WAAW,CAACgB,YAAY,CAACpB,EAAE,CAAEW,WAAW,CAAC,CACjD,CAAC,CAED,KAAM,CAAA8C,kBAAkB,CAAG,KAAO,CAAAC,OAAwB,EAAK,CAC7D,GAAI,CAACtC,YAAY,CAAE,OAEnB,KAAM,CAAAkC,UAAmB,CAAG,CAC1BtD,EAAE,CAAE2C,IAAI,CAACC,GAAG,CAAC,CAAC,CAACW,QAAQ,CAAC,CAAC,CACzBjB,OAAO,CAAE,aAAaoB,OAAO,CAACjB,IAAI,EAAE,CACpCF,QAAQ,CAAErC,IAAI,EAAEF,EAAE,EAAI,IAAI,CAC1BwC,WAAW,CAAEjB,SAAS,EAAEvB,EAAE,EAAI,OAAO,CACrCyC,IAAI,CAAEiB,OAAO,CAACjB,IAAI,CAClBC,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAC,CAACE,WAAW,CAAC,CAAC,CACnCC,MAAM,CAAE,KAAK,CACbC,UAAU,CAAE,IAAI,CAChBC,WAAW,CAAEU,OAAO,CAACV,WAAW,CAChCC,UAAU,CAAES,OAAO,CAACT,UAAU,CAC9BC,WAAW,CAAE,CAAC,CACdC,QAAQ,CAAE,oEACZ,CAAC,CAEDrC,WAAW,CAAC0C,IAAI,EAAI,CAAC,GAAGA,IAAI,CAAEF,UAAU,CAAC,CAAC,CAE1C,KAAM,CAAAlD,WAAW,CAACgB,YAAY,CAACpB,EAAE,CAAEsD,UAAU,CAAChB,OAAO,CAAEoB,OAAO,CAACjB,IAAI,CAAE,CACnEM,UAAU,CAAE,IAAI,CAChBC,WAAW,CAAEU,OAAO,CAACV,WAAW,CAChCC,UAAU,CAAES,OAAO,CAACT,UAAU,CAC9BE,QAAQ,CAAEG,UAAU,CAACH,QACvB,CAAC,CAAC,CACJ,CAAC,CAED,KAAM,CAAAQ,iBAAiB,CAAIC,SAAiB,EAAK,CAC/CvD,mBAAmB,CAACuD,SAAS,CAAC,CAChC,CAAC,CAED,KAAM,CAAAC,mBAAmB,CAAID,SAAiB,EAAK,CACjDtD,oBAAoB,CAACsD,SAAS,CAAC,CAC/B9C,WAAW,CAAC0C,IAAI,EAAIA,IAAI,CAACM,GAAG,CAACC,GAAG,EAC9BA,GAAG,CAAC/D,EAAE,GAAK4D,SAAS,CAAAI,MAAA,CAAAC,MAAA,IAAQF,GAAG,EAAEG,SAAS,CAAE,IAAI,GAAKH,GACvD,CAAC,CAAC,CACJ,CAAC,CAED,KAAM,CAAAI,UAAU,CAAIzB,SAAiB,EAAK,CACxC,KAAM,CAAA0B,IAAI,CAAG,GAAI,CAAAzB,IAAI,CAACD,SAAS,CAAC,CAChC,MAAO,CAAA0B,IAAI,CAACC,kBAAkB,CAAC,EAAE,CAAE,CAAEC,IAAI,CAAE,SAAS,CAAEC,MAAM,CAAE,SAAU,CAAC,CAAC,CAC5E,CAAC,CAED,KAAM,CAAAC,aAAa,CAAGA,CAAC,CAAEC,IAAwB,CAAC,GAAK,CACrD,KAAM,CAAAC,WAAW,CAAGD,IAAI,CAAClC,QAAQ,GAAKrC,IAAI,EAAEF,EAAE,CAE9C,GAAIyE,IAAI,CAAC1B,UAAU,CAAE,CACnB,MACE,CAAAnD,KAAA,CAAC5B,IAAI,EAAC2G,KAAK,CAAE,CAACC,MAAM,CAACC,gBAAgB,CAAEH,WAAW,EAAIE,MAAM,CAACE,kBAAkB,CAAE,CAAAC,QAAA,EAC9E,CAACL,WAAW,EACXhF,IAAA,CAACb,MAAM,EACLmG,GAAG,CAAEzD,SAAS,EAAE0D,YAAa,CAC7BC,IAAI,CAAE,EAAG,CACTP,KAAK,CAAEC,MAAM,CAACO,aAAc,CAC7B,CACF,CACDzF,IAAA,CAACJ,eAAe,EACd8F,OAAO,CAAEX,IAAK,CACdY,MAAM,CAAEA,CAAA,GAAM1B,iBAAiB,CAACc,IAAI,CAACzE,EAAE,CAAE,CACzCsF,QAAQ,CAAEA,CAAA,GAAMzB,mBAAmB,CAACY,IAAI,CAACzE,EAAE,CAAE,CAC7C0E,WAAW,CAAEA,WAAY,CAC1B,CAAC,EACE,CAAC,CAEX,CAEA,MACE,CAAA9E,KAAA,CAAC5B,IAAI,EAAC2G,KAAK,CAAE,CAACC,MAAM,CAACC,gBAAgB,CAAEH,WAAW,EAAIE,MAAM,CAACE,kBAAkB,CAAE,CAAAC,QAAA,EAC9E,CAACL,WAAW,EACXhF,IAAA,CAACb,MAAM,EACLmG,GAAG,CAAEzD,SAAS,EAAE0D,YAAa,CAC7BC,IAAI,CAAE,EAAG,CACTP,KAAK,CAAEC,MAAM,CAACO,aAAc,CAC7B,CACF,CACDvF,KAAA,CAAC5B,IAAI,EAAC2G,KAAK,CAAE,CACXC,MAAM,CAACW,aAAa,CACpBb,WAAW,CACT,CAAEc,eAAe,CAAEhF,MAAM,CAACiF,OAAQ,CAAC,CACnC,CAAED,eAAe,CAAEhF,MAAM,CAACkF,IAAK,CAAC,CAClC,CAAAX,QAAA,EACArF,IAAA,CAAC3B,IAAI,EAAC4G,KAAK,CAAE,CAACC,MAAM,CAACjE,WAAW,CAAE,CAAEgF,KAAK,CAAEjB,WAAW,CAAG,SAAS,CAAGlE,MAAM,CAACoF,IAAK,CAAC,CAAE,CAAAb,QAAA,CACjFN,IAAI,CAACnC,OAAO,CACT,CAAC,CACP5C,IAAA,CAAC3B,IAAI,EAAC4G,KAAK,CAAE,CACXC,MAAM,CAACiB,WAAW,CAClB,CAAEF,KAAK,CAAEjB,WAAW,CAAG,uBAAuB,CAAGlE,MAAM,CAACsF,aAAc,CAAC,CACvE,CAAAf,QAAA,CACCZ,UAAU,CAACM,IAAI,CAAC/B,SAAS,CAAC,CACvB,CAAC,EACH,CAAC,EACH,CAAC,CAEX,CAAC,CAED,KAAM,CAAAqD,QAAQ,CAAG,IAAI,CAErB,GAAI,CAAC3E,YAAY,EAAI,CAACG,SAAS,CAAE,CAC/B,MACE,CAAA3B,KAAA,CAAC5B,IAAI,EAAC2G,KAAK,CAAE,CAACC,MAAM,CAACoB,cAAc,CAAE,CAAER,eAAe,CAAEhF,MAAM,CAACyF,UAAW,CAAC,CAAE,CAAAlB,QAAA,EAC3ErF,IAAA,CAAC3B,IAAI,EAAC4G,KAAK,CAAE,CAACC,MAAM,CAACsB,SAAS,CAAE,CAAEP,KAAK,CAAEnF,MAAM,CAACoF,IAAK,CAAC,CAAE,CAAAb,QAAA,CAAC,wBAAsB,CAAM,CAAC,CACtFrF,IAAA,CAACvB,gBAAgB,EAACgI,OAAO,CAAEA,CAAA,GAAM3H,MAAM,CAAC4H,IAAI,CAAC,CAAE,CAACzB,KAAK,CAAE,CAACC,MAAM,CAACyB,UAAU,CAAE,CAAEb,eAAe,CAAEhF,MAAM,CAACiF,OAAQ,CAAC,CAAE,CAAAV,QAAA,CAC9GrF,IAAA,CAAC3B,IAAI,EAAC4G,KAAK,CAAE,CAACC,MAAM,CAAC0B,cAAc,CAAE,CAAEX,KAAK,CAAEnF,MAAM,CAACoF,IAAK,CAAC,CAAE,CAAAb,QAAA,CAAC,SAAO,CAAM,CAAC,CAC5D,CAAC,EACf,CAAC,CAEX,CAEA,MACE,CAAAnF,KAAA,CAACxB,oBAAoB,EACnBuG,KAAK,CAAE,CAACC,MAAM,CAAC2B,SAAS,CAAE,CAAEf,eAAe,CAAEhF,MAAM,CAACyF,UAAW,CAAC,CAAE,CAClEO,QAAQ,CAAE,MAAwB,SAAS,CAAG,QAAS,CAAAzB,QAAA,EAEvDrF,IAAA,CAACnB,KAAK,CAACkI,MAAM,EACX/C,OAAO,CAAE,CACPgD,WAAW,CAAE,KACf,CAAE,CACH,CAAC,CAGF9G,KAAA,CAAC5B,IAAI,EAAC2G,KAAK,CAAE,CAACC,MAAM,CAAC+B,MAAM,CAAE,CAAEnB,eAAe,CAAEhF,MAAM,CAACyF,UAAU,CAAEW,iBAAiB,CAAEpG,MAAM,CAACqG,MAAO,CAAC,CAAE,CAAA9B,QAAA,EACrGrF,IAAA,CAACvB,gBAAgB,EACfgI,OAAO,CAAEA,CAAA,GAAM3H,MAAM,CAAC4H,IAAI,CAAC,CAAE,CAC7BzB,KAAK,CAAEC,MAAM,CAACkC,OAAQ,CAAA/B,QAAA,CAEtBrF,IAAA,CAACZ,SAAS,EAACoG,IAAI,CAAE,EAAG,CAACS,KAAK,CAAEnF,MAAM,CAACoF,IAAK,CAAE,CAAC,CAC3B,CAAC,CAEnBhG,KAAA,CAACzB,gBAAgB,EACfwG,KAAK,CAAEC,MAAM,CAACmC,YAAa,CAC3BZ,OAAO,CAAEA,CAAA,GAAM3H,MAAM,CAACwI,IAAI,CAAC,SAASzF,SAAS,CAACvB,EAAE,EAAE,CAAE,CAAA+E,QAAA,EAEpDrF,IAAA,CAACb,MAAM,EACLmG,GAAG,CAAEzD,SAAS,CAAC0D,YAAa,CAC5BC,IAAI,CAAE,EAAG,CACV,CAAC,CACFtF,KAAA,CAAC5B,IAAI,EAAC2G,KAAK,CAAEC,MAAM,CAACqC,QAAS,CAAAlC,QAAA,EAC3BrF,IAAA,CAAC3B,IAAI,EAAC4G,KAAK,CAAE,CAACC,MAAM,CAACsC,QAAQ,CAAE,CAAEvB,KAAK,CAAEnF,MAAM,CAACoF,IAAK,CAAC,CAAE,CAACuB,aAAa,CAAE,CAAE,CAAApC,QAAA,CACtExD,SAAS,CAAC6F,WAAW,CAClB,CAAC,CACNrB,QAAQ,EACPrG,IAAA,CAAC3B,IAAI,EAAC4G,KAAK,CAAE,CAACC,MAAM,CAACyC,UAAU,CAAE,CAAE1B,KAAK,CAAEnF,MAAM,CAACsF,aAAc,CAAC,CAAE,CAAAf,QAAA,CAAC,eAEnE,CAAM,CACP,EACG,CAAC,EACS,CAAC,CAEnBrF,IAAA,CAACvB,gBAAgB,EACfwG,KAAK,CAAEC,MAAM,CAAC0C,OAAQ,CACtBnB,OAAO,CAAEA,CAAA,GAAM3H,MAAM,CAACwI,IAAI,CAAC,oBAAoB,CAAE,CAAAjC,QAAA,CAEjDrF,IAAA,CAACN,IAAI,EAAC8F,IAAI,CAAE,EAAG,CAACS,KAAK,CAAEnF,MAAM,CAACoF,IAAK,CAAE,CAAC,CACtB,CAAC,EACf,CAAC,CAEN3E,2BAA2B,EAC1BvB,IAAA,CAAC1B,IAAI,EAAC2G,KAAK,CAAE,CAACC,MAAM,CAAC2C,gBAAgB,CAAE,CAAE/B,eAAe,CAAEhF,MAAM,CAACkF,IAAK,CAAC,CAAE,CAAAX,QAAA,CACvEnF,KAAA,CAAC7B,IAAI,EAAC4G,KAAK,CAAE,CAACC,MAAM,CAAC4C,cAAc,CAAE,CAAE7B,KAAK,CAAEnF,MAAM,CAACsF,aAAc,CAAC,CAAE,CAAAf,QAAA,EAAC,2IAC0D,CAAArF,IAAA,CAAC3B,IAAI,EAAC4G,KAAK,CAAE,CAAEgB,KAAK,CAAEnF,MAAM,CAACiF,OAAQ,CAAE,CAAAV,QAAA,CAAC,aAAW,CAAM,CAAC,EACrL,CAAC,CACH,CACP,CAEDrF,IAAA,CAACzB,QAAQ,EACPwJ,IAAI,CAAE5G,QAAS,CACf6G,YAAY,CAAGjD,IAAI,EAAKA,IAAI,CAACzE,EAAG,CAChC2H,UAAU,CAAEnD,aAAc,CAC1BG,KAAK,CAAEC,MAAM,CAACgD,YAAa,CAC3BC,qBAAqB,CAAEjD,MAAM,CAACkD,iBAAkB,CAChDC,4BAA4B,CAAE,KAAM,CACrC,CAAC,CAIFnI,KAAA,CAAC5B,IAAI,EAAC2G,KAAK,CAAE,CAACC,MAAM,CAACoD,cAAc,CAAE,CAAExC,eAAe,CAAEhF,MAAM,CAACyF,UAAU,CAAEgC,cAAc,CAAEzH,MAAM,CAACqG,MAAM,CAAEqB,aAAa,CAAEC,IAAI,CAACC,GAAG,CAAC1H,MAAM,CAAC2H,MAAM,CAAE,CAAC,CAAE,CAAC,CAAE,CAAAtD,QAAA,EACrJrF,IAAA,CAACvB,gBAAgB,EAACwG,KAAK,CAAEC,MAAM,CAAC0D,SAAU,CAACnC,OAAO,CAAEA,CAAA,GAAM,CAAC,CAAE,CAAApB,QAAA,CAC3DrF,IAAA,CAACX,MAAM,EAACmG,IAAI,CAAE,EAAG,CAACS,KAAK,CAAEnF,MAAM,CAACiF,OAAQ,CAAE,CAAC,CAC3B,CAAC,CAEnB/F,IAAA,CAAC1B,IAAI,EAAC2G,KAAK,CAAE,CAACC,MAAM,CAAC2D,YAAY,CAAE,CAAE/C,eAAe,CAAEhF,MAAM,CAACkF,IAAI,CAAE8C,WAAW,CAAEhI,MAAM,CAACqG,MAAO,CAAC,CAAE,CAAA9B,QAAA,CAC/FrF,IAAA,CAACxB,SAAS,EACRyG,KAAK,CAAE,CAACC,MAAM,CAAC6D,YAAY,CAAE,CAAE9C,KAAK,CAAEnF,MAAM,CAACoF,IAAK,CAAC,CAAE,CACrD8C,KAAK,CAAE/H,WAAY,CACnBgI,YAAY,CAAE/H,cAAe,CAC7BgI,WAAW,CAAC,SAAS,CACrBC,oBAAoB,CAAErI,MAAM,CAACsF,aAAc,CAC3CgD,SAAS,MACTC,SAAS,CAAE,IAAK,CACjB,CAAC,CACE,CAAC,CAEPrJ,IAAA,CAACvB,gBAAgB,EAACwG,KAAK,CAAEC,MAAM,CAAC0D,SAAU,CAACnC,OAAO,CAAEA,CAAA,GAAM,CAAC,CAAE,CAAApB,QAAA,CAC3DrF,IAAA,CAACV,GAAG,EAACkG,IAAI,CAAE,EAAG,CAACS,KAAK,CAAEnF,MAAM,CAACiF,OAAQ,CAAE,CAAC,CACxB,CAAC,CAEnB/F,IAAA,CAACvB,gBAAgB,EAACwG,KAAK,CAAEC,MAAM,CAAC0D,SAAU,CAACnC,OAAO,CAAEA,CAAA,GAAM,CAAC,CAAE,CAAApB,QAAA,CAC3DrF,IAAA,CAACR,SAAS,EAACgG,IAAI,CAAE,EAAG,CAACS,KAAK,CAAEnF,MAAM,CAACiF,OAAQ,CAAE,CAAC,CAC9B,CAAC,CAElB9E,WAAW,CAAC0C,IAAI,CAAC,CAAC,CACjB3D,IAAA,CAACvB,gBAAgB,EACfgI,OAAO,CAAE/C,iBAAkB,CAAA2B,QAAA,CAE3BrF,IAAA,CAAC3B,IAAI,EAAC4G,KAAK,CAAE,CAACC,MAAM,CAACoE,QAAQ,CAAE,CAAErD,KAAK,CAAEnF,MAAM,CAACiF,OAAQ,CAAC,CAAE,CAAAV,QAAA,CAAC,MAAI,CAAM,CAAC,CACtD,CAAC,CAEnBrF,IAAA,CAACvB,gBAAgB,EAACwG,KAAK,CAAEC,MAAM,CAAC0D,SAAU,CAACnC,OAAO,CAAEA,CAAA,GAAM,CAAC,CAAE,CAAApB,QAAA,CAC3DrF,IAAA,CAACP,KAAK,EAAC+F,IAAI,CAAE,EAAG,CAACS,KAAK,CAAEnF,MAAM,CAACiF,OAAQ,CAAE,CAAC,CAC1B,CACnB,EACG,CAAC,CAEP/F,IAAA,CAACL,gBAAgB,EACf4J,OAAO,CAAElI,oBAAqB,CAC9BmI,OAAO,CAAEA,CAAA,GAAMlI,uBAAuB,CAAC,KAAK,CAAE,CAC9CmI,MAAM,CAAE1F,kBAAmB,CAC5B,CAAC,EACkB,CAAC,CAE3B,CAEA,KAAM,CAAAmB,MAAM,CAAG9G,UAAU,CAACsL,MAAM,CAAC,CAC/B7C,SAAS,CAAE,CACT8C,IAAI,CAAE,CACR,CAAC,CACDrD,cAAc,CAAE,CACdqD,IAAI,CAAE,CAAC,CACPC,cAAc,CAAE,QAAQ,CACxBC,UAAU,CAAE,QAAQ,CACpBC,OAAO,CAAE,EACX,CAAC,CACDtD,SAAS,CAAE,CACTuD,QAAQ,CAAE,EAAE,CACZC,YAAY,CAAE,EAChB,CAAC,CACDrD,UAAU,CAAE,CACVsD,eAAe,CAAE,EAAE,CACnBC,iBAAiB,CAAE,EAAE,CACrBC,YAAY,CAAE,EAChB,CAAC,CACDvD,cAAc,CAAE,CACdmD,QAAQ,CAAE,EAAE,CACZK,UAAU,CAAE,KACd,CAAC,CACDnD,MAAM,CAAE,CACNoD,aAAa,CAAE,KAAK,CACpBR,UAAU,CAAE,QAAQ,CACpBD,cAAc,CAAE,eAAe,CAC/BM,iBAAiB,CAAE,EAAE,CACrBI,UAAU,CAAE,EAAE,CACd9B,aAAa,CAAE,EAAE,CACjB+B,iBAAiB,CAAE,GACrB,CAAC,CACDnD,OAAO,CAAE,CACP0C,OAAO,CAAE,CACX,CAAC,CACDzC,YAAY,CAAE,CACZsC,IAAI,CAAE,CAAC,CACPU,aAAa,CAAE,KAAK,CACpBR,UAAU,CAAE,QAAQ,CACpBW,UAAU,CAAE,CAAC,CACbC,GAAG,CAAE,EACP,CAAC,CACDlD,QAAQ,CAAE,CACRoC,IAAI,CAAE,CACR,CAAC,CACDnC,QAAQ,CAAE,CACRuC,QAAQ,CAAE,EAAE,CACZK,UAAU,CAAE,KACd,CAAC,CACDzC,UAAU,CAAE,CACVoC,QAAQ,CAAE,EAAE,CACZW,SAAS,CAAE,CACb,CAAC,CACD9C,OAAO,CAAE,CACPkC,OAAO,CAAE,CACX,CAAC,CACD5B,YAAY,CAAE,CACZyB,IAAI,CAAE,CACR,CAAC,CACDvB,iBAAiB,CAAE,CACjB0B,OAAO,CAAE,EACX,CAAC,CACD3E,gBAAgB,CAAE,CAChBkF,aAAa,CAAE,KAAK,CACpBL,YAAY,CAAE,EAAE,CAChBH,UAAU,CAAE,UACd,CAAC,CACDzE,kBAAkB,CAAE,CAClBwE,cAAc,CAAE,UAClB,CAAC,CACDnE,aAAa,CAAE,CACbkF,WAAW,CAAE,CACf,CAAC,CACD9E,aAAa,CAAE,CACb+E,QAAQ,CAAE,KAAK,CACfd,OAAO,CAAE,EAAE,CACXK,YAAY,CAAE,EAChB,CAAC,CACDlJ,WAAW,CAAE,CACX8I,QAAQ,CAAE,EAAE,CACZc,UAAU,CAAE,EACd,CAAC,CACD1E,WAAW,CAAE,CACX4D,QAAQ,CAAE,EAAE,CACZW,SAAS,CAAE,CACb,CAAC,CAEDpC,cAAc,CAAE,CACd+B,aAAa,CAAE,KAAK,CACpBR,UAAU,CAAE,QAAQ,CACpBK,iBAAiB,CAAE,EAAE,CACrBD,eAAe,CAAE,CAAC,CAClBa,cAAc,CAAE,GAAG,CACnBL,GAAG,CAAE,EACP,CAAC,CACD5B,YAAY,CAAE,CACZc,IAAI,CAAE,CAAC,CACPQ,YAAY,CAAE,EAAE,CAChBD,iBAAiB,CAAE,EAAE,CACrBD,eAAe,CAAE,CAAC,CAClBc,SAAS,CAAE,EAAE,CACbC,SAAS,CAAE,GAAG,CACdpB,cAAc,CAAE,QAAQ,CACxBqB,WAAW,CAAE,CACf,CAAC,CACDlC,YAAY,CAAE,CACZgB,QAAQ,CAAE,EAAE,CACZc,UAAU,CAAE,EAAE,CACdE,SAAS,CAAE,EAAE,CACbC,SAAS,CAAE,EAAE,CACbV,UAAU,CAAE,CAAC,CACb9B,aAAa,CAAE,CACjB,CAAC,CACDI,SAAS,CAAE,CACTkB,OAAO,CAAE,CACX,CAAC,CACDR,QAAQ,CAAE,CACRS,QAAQ,CAAE,EAAE,CACZK,UAAU,CAAE,KACd,CAAC,CACDvC,gBAAgB,CAAE,CAChBoC,eAAe,CAAE,EAAE,CACnBC,iBAAiB,CAAE,EACrB,CAAC,CACDpC,cAAc,CAAE,CACdiC,QAAQ,CAAE,EAAE,CACZc,UAAU,CAAE,EAAE,CACdK,SAAS,CAAE,QACb,CACF,CAAC,CAAC","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}