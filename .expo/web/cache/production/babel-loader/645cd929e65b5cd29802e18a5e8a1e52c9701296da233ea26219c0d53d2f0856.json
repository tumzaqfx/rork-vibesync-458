{"ast":null,"code":"'use strict';import Sensor from\"./Sensor.js\";export class SensorContainer{nativeSensors=new Map();getSensorId(sensorType,config){return sensorType*100+config.iosReferenceFrame*10+Number(config.adjustToInterfaceOrientation);}initializeSensor(sensorType,config){const sensorId=this.getSensorId(sensorType,config);if(!this.nativeSensors.has(sensorId)){const newSensor=new Sensor(sensorType,config);this.nativeSensors.set(sensorId,newSensor);}const sensor=this.nativeSensors.get(sensorId);return sensor.getSharedValue();}registerSensor(sensorType,config,handler){const sensorId=this.getSensorId(sensorType,config);if(!this.nativeSensors.has(sensorId)){return-1;}const sensor=this.nativeSensors.get(sensorId);if(sensor&&sensor.isAvailable()&&(sensor.isRunning()||sensor.register(handler))){sensor.listenersNumber++;return sensorId;}return-1;}unregisterSensor(sensorId){if(this.nativeSensors.has(sensorId)){const sensor=this.nativeSensors.get(sensorId);if(sensor&&sensor.isRunning()){sensor.listenersNumber--;if(sensor.listenersNumber===0){sensor.unregister();}}}}}","map":{"version":3,"names":["Sensor","SensorContainer","nativeSensors","Map","getSensorId","sensorType","config","iosReferenceFrame","Number","adjustToInterfaceOrientation","initializeSensor","sensorId","has","newSensor","set","sensor","get","getSharedValue","registerSensor","handler","isAvailable","isRunning","register","listenersNumber","unregisterSensor","unregister"],"sources":["/home/user/rork-vibesync-458/node_modules/react-native-reanimated/src/SensorContainer.ts"],"sourcesContent":["'use strict';\nimport type {\n  SensorType,\n  SensorConfig,\n  Value3D,\n  ValueRotation,\n  ShareableRef,\n  SharedValue,\n} from './commonTypes';\nimport Sensor from './Sensor';\n\nexport class SensorContainer {\n  private nativeSensors: Map<number, Sensor> = new Map();\n\n  getSensorId(sensorType: SensorType, config: SensorConfig) {\n    return (\n      sensorType * 100 +\n      config.iosReferenceFrame * 10 +\n      Number(config.adjustToInterfaceOrientation)\n    );\n  }\n\n  initializeSensor(\n    sensorType: SensorType,\n    config: SensorConfig\n  ): SharedValue<Value3D | ValueRotation> {\n    const sensorId = this.getSensorId(sensorType, config);\n\n    if (!this.nativeSensors.has(sensorId)) {\n      const newSensor = new Sensor(sensorType, config);\n      this.nativeSensors.set(sensorId, newSensor);\n    }\n\n    const sensor = this.nativeSensors.get(sensorId);\n    return sensor!.getSharedValue();\n  }\n\n  registerSensor(\n    sensorType: SensorType,\n    config: SensorConfig,\n    handler: ShareableRef<(data: Value3D | ValueRotation) => void>\n  ): number {\n    const sensorId = this.getSensorId(sensorType, config);\n\n    if (!this.nativeSensors.has(sensorId)) {\n      return -1;\n    }\n\n    const sensor = this.nativeSensors.get(sensorId);\n    if (\n      sensor &&\n      sensor.isAvailable() &&\n      (sensor.isRunning() || sensor.register(handler))\n    ) {\n      sensor.listenersNumber++;\n      return sensorId;\n    }\n    return -1;\n  }\n\n  unregisterSensor(sensorId: number) {\n    if (this.nativeSensors.has(sensorId)) {\n      const sensor = this.nativeSensors.get(sensorId);\n      if (sensor && sensor.isRunning()) {\n        sensor.listenersNumber--;\n        if (sensor.listenersNumber === 0) {\n          sensor.unregister();\n        }\n      }\n    }\n  }\n}\n"],"mappings":"AAAA,YAAY,CASZ,MAAO,CAAAA,MAAM,KAAM,aAAU,CAE7B,MAAO,MAAM,CAAAC,eAAgB,CACnBC,aAAa,CAAwB,GAAI,CAAAC,GAAG,CAAC,CAAC,CAEtDC,WAAWA,CAACC,UAAsB,CAAEC,MAAoB,CAAE,CACxD,MACE,CAAAD,UAAU,CAAG,GAAG,CAChBC,MAAM,CAACC,iBAAiB,CAAG,EAAE,CAC7BC,MAAM,CAACF,MAAM,CAACG,4BAA4B,CAAC,CAE/C,CAEAC,gBAAgBA,CACdL,UAAsB,CACtBC,MAAoB,CACkB,CACtC,KAAM,CAAAK,QAAQ,CAAG,IAAI,CAACP,WAAW,CAACC,UAAU,CAAEC,MAAM,CAAC,CAErD,GAAI,CAAC,IAAI,CAACJ,aAAa,CAACU,GAAG,CAACD,QAAQ,CAAC,CAAE,CACrC,KAAM,CAAAE,SAAS,CAAG,GAAI,CAAAb,MAAM,CAACK,UAAU,CAAEC,MAAM,CAAC,CAChD,IAAI,CAACJ,aAAa,CAACY,GAAG,CAACH,QAAQ,CAAEE,SAAS,CAAC,CAC7C,CAEA,KAAM,CAAAE,MAAM,CAAG,IAAI,CAACb,aAAa,CAACc,GAAG,CAACL,QAAQ,CAAC,CAC/C,MAAO,CAAAI,MAAM,CAAEE,cAAc,CAAC,CAAC,CACjC,CAEAC,cAAcA,CACZb,UAAsB,CACtBC,MAAoB,CACpBa,OAA8D,CACtD,CACR,KAAM,CAAAR,QAAQ,CAAG,IAAI,CAACP,WAAW,CAACC,UAAU,CAAEC,MAAM,CAAC,CAErD,GAAI,CAAC,IAAI,CAACJ,aAAa,CAACU,GAAG,CAACD,QAAQ,CAAC,CAAE,CACrC,MAAO,CAAC,CAAC,CACX,CAEA,KAAM,CAAAI,MAAM,CAAG,IAAI,CAACb,aAAa,CAACc,GAAG,CAACL,QAAQ,CAAC,CAC/C,GACEI,MAAM,EACNA,MAAM,CAACK,WAAW,CAAC,CAAC,GACnBL,MAAM,CAACM,SAAS,CAAC,CAAC,EAAIN,MAAM,CAACO,QAAQ,CAACH,OAAO,CAAC,CAAC,CAChD,CACAJ,MAAM,CAACQ,eAAe,EAAE,CACxB,MAAO,CAAAZ,QAAQ,CACjB,CACA,MAAO,CAAC,CAAC,CACX,CAEAa,gBAAgBA,CAACb,QAAgB,CAAE,CACjC,GAAI,IAAI,CAACT,aAAa,CAACU,GAAG,CAACD,QAAQ,CAAC,CAAE,CACpC,KAAM,CAAAI,MAAM,CAAG,IAAI,CAACb,aAAa,CAACc,GAAG,CAACL,QAAQ,CAAC,CAC/C,GAAII,MAAM,EAAIA,MAAM,CAACM,SAAS,CAAC,CAAC,CAAE,CAChCN,MAAM,CAACQ,eAAe,EAAE,CACxB,GAAIR,MAAM,CAACQ,eAAe,GAAK,CAAC,CAAE,CAChCR,MAAM,CAACU,UAAU,CAAC,CAAC,CACrB,CACF,CACF,CACF,CACF","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}