{"ast":null,"code":"import _objectWithoutPropertiesLoose from\"@babel/runtime/helpers/objectWithoutPropertiesLoose\";const _excluded=[\"shouldActivateOnStart\",\"disallowInterruption\",\"shouldCancelWhenOutside\",\"minDurationMs\",\"maxDist\",\"minPointers\",\"maxPointers\"];function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}import Hammer from'@egjs/hammerjs';import{State}from'../State';import{CONTENT_TOUCHES_DELAY,CONTENT_TOUCHES_QUICK_TAP_END_DELAY}from'./constants';import DiscreteGestureHandler from'./DiscreteGestureHandler';import{fireAfterInterval,isValidNumber,isnan}from'./utils';class PressGestureHandler extends DiscreteGestureHandler{constructor(...args){super(...args);_defineProperty(this,\"visualFeedbackTimer\",void 0);_defineProperty(this,\"initialEvent\",null);_defineProperty(this,\"shouldDelayTouches\",true);}get name(){return'press';}get minDurationMs(){return isnan(this.config.minDurationMs)?5:this.config.minDurationMs;}get maxDist(){return isnan(this.config.maxDist)?9:this.config.maxDist;}get NativeGestureClass(){return Hammer.Press;}simulateCancelEvent(inputData){this.hasGestureFailed=true;this.cancelEvent(inputData);}updateHasCustomActivationCriteria({shouldCancelWhenOutside,maxDistSq}){return shouldCancelWhenOutside||!isValidNumber(maxDistSq);}getState(type){return{[Hammer.INPUT_START]:State.BEGAN,[Hammer.INPUT_MOVE]:State.ACTIVE,[Hammer.INPUT_END]:State.END,[Hammer.INPUT_CANCEL]:State.CANCELLED}[type];}getConfig(){if(!this.hasCustomActivationCriteria){return{shouldCancelWhenOutside:true,maxDistSq:10};}return this.config;}getHammerConfig(){return Object.assign({},super.getHammerConfig(),{time:this.minDurationMs});}onGestureActivated(ev){this.onGestureStart(ev);}shouldDelayTouchForEvent({pointerType}){return this.shouldDelayTouches&&pointerType==='touch';}onGestureStart(ev){this.isGestureRunning=true;clearTimeout(this.visualFeedbackTimer);this.initialEvent=ev;this.visualFeedbackTimer=fireAfterInterval(()=>{this.sendGestureStartedEvent(this.initialEvent);this.initialEvent=null;},this.shouldDelayTouchForEvent(ev)&&CONTENT_TOUCHES_DELAY);}sendGestureStartedEvent(ev){clearTimeout(this.visualFeedbackTimer);this.visualFeedbackTimer=null;this.sendEvent(Object.assign({},ev,{eventType:Hammer.INPUT_MOVE,isFirst:true}));}forceInvalidate(event){super.forceInvalidate(event);clearTimeout(this.visualFeedbackTimer);this.visualFeedbackTimer=null;this.initialEvent=null;}onRawEvent(ev){super.onRawEvent(ev);if(this.isGestureRunning){if(ev.isFinal){let timeout;if(this.visualFeedbackTimer){timeout=CONTENT_TOUCHES_QUICK_TAP_END_DELAY;this.sendGestureStartedEvent(this.initialEvent);this.initialEvent=null;}fireAfterInterval(()=>{this.sendEvent(Object.assign({},ev,{eventType:Hammer.INPUT_END,isFinal:true}));this.onGestureEnded();},timeout);}else{this.sendEvent(Object.assign({},ev,{eventType:Hammer.INPUT_MOVE,isFinal:false}));}}}updateGestureConfig(_ref){let{shouldActivateOnStart=false,disallowInterruption=false,shouldCancelWhenOutside=true,minDurationMs=Number.NaN,maxDist=Number.NaN,minPointers=1,maxPointers=1}=_ref,props=_objectWithoutPropertiesLoose(_ref,_excluded);return super.updateGestureConfig(Object.assign({shouldActivateOnStart,disallowInterruption,shouldCancelWhenOutside,minDurationMs,maxDist,minPointers,maxPointers},props));}}export default PressGestureHandler;","map":{"version":3,"names":["Hammer","State","CONTENT_TOUCHES_DELAY","CONTENT_TOUCHES_QUICK_TAP_END_DELAY","DiscreteGestureHandler","fireAfterInterval","isValidNumber","isnan","PressGestureHandler","constructor","args","_defineProperty","name","minDurationMs","config","maxDist","NativeGestureClass","Press","simulateCancelEvent","inputData","hasGestureFailed","cancelEvent","updateHasCustomActivationCriteria","shouldCancelWhenOutside","maxDistSq","getState","type","INPUT_START","BEGAN","INPUT_MOVE","ACTIVE","INPUT_END","END","INPUT_CANCEL","CANCELLED","getConfig","hasCustomActivationCriteria","getHammerConfig","Object","assign","time","onGestureActivated","ev","onGestureStart","shouldDelayTouchForEvent","pointerType","shouldDelayTouches","isGestureRunning","clearTimeout","visualFeedbackTimer","initialEvent","sendGestureStartedEvent","sendEvent","eventType","isFirst","forceInvalidate","event","onRawEvent","isFinal","timeout","onGestureEnded","updateGestureConfig","_ref","shouldActivateOnStart","disallowInterruption","Number","NaN","minPointers","maxPointers","props","_objectWithoutPropertiesLoose","_excluded"],"sources":["/home/user/rork-vibesync-458/node_modules/react-native-gesture-handler/lib/module/web_hammer/PressGestureHandler.ts"],"sourcesContent":["import Hammer from '@egjs/hammerjs';\n\nimport { State } from '../State';\nimport {\n  CONTENT_TOUCHES_DELAY,\n  CONTENT_TOUCHES_QUICK_TAP_END_DELAY,\n  HammerInputNames,\n} from './constants';\nimport DiscreteGestureHandler from './DiscreteGestureHandler';\nimport { Config, HammerInputExt } from './GestureHandler';\nimport { fireAfterInterval, isValidNumber, isnan } from './utils';\n\nclass PressGestureHandler extends DiscreteGestureHandler {\n  private visualFeedbackTimer: any;\n  private initialEvent: HammerInputExt | null = null;\n  get name() {\n    return 'press';\n  }\n\n  get minDurationMs() {\n    // @ts-ignore FIXME(TS)\n    return isnan(this.config.minDurationMs) ? 5 : this.config.minDurationMs;\n  }\n\n  get maxDist() {\n    return isnan(this.config.maxDist) ? 9 : this.config.maxDist;\n  }\n\n  get NativeGestureClass() {\n    return Hammer.Press;\n  }\n\n  shouldDelayTouches = true;\n\n  simulateCancelEvent(inputData: HammerInputExt) {\n    // Long press never starts so we can't rely on the running event boolean.\n    this.hasGestureFailed = true;\n    this.cancelEvent(inputData);\n  }\n\n  updateHasCustomActivationCriteria({\n    shouldCancelWhenOutside,\n    maxDistSq,\n  }: Config & { shouldCancelWhenOutside: boolean }) {\n    return shouldCancelWhenOutside || !isValidNumber(maxDistSq);\n  }\n\n  getState(type: keyof typeof HammerInputNames): State {\n    return {\n      [Hammer.INPUT_START]: State.BEGAN,\n      [Hammer.INPUT_MOVE]: State.ACTIVE,\n      [Hammer.INPUT_END]: State.END,\n      [Hammer.INPUT_CANCEL]: State.CANCELLED,\n    }[type];\n  }\n\n  getConfig() {\n    if (!this.hasCustomActivationCriteria) {\n      // Default config\n      // If no params have been defined then this config should emulate the native gesture as closely as possible.\n      return {\n        shouldCancelWhenOutside: true,\n        maxDistSq: 10,\n      };\n    }\n    return this.config;\n  }\n\n  getHammerConfig() {\n    return {\n      ...super.getHammerConfig(),\n      // threshold: this.maxDist,\n      time: this.minDurationMs,\n    };\n  }\n\n  onGestureActivated(ev: HammerInputExt) {\n    this.onGestureStart(ev);\n  }\n\n  shouldDelayTouchForEvent({ pointerType }: HammerInputExt) {\n    // Don't disable event for mouse input\n    return this.shouldDelayTouches && pointerType === 'touch';\n  }\n\n  onGestureStart(ev: HammerInputExt) {\n    this.isGestureRunning = true;\n    clearTimeout(this.visualFeedbackTimer);\n    this.initialEvent = ev;\n    this.visualFeedbackTimer = fireAfterInterval(\n      () => {\n        this.sendGestureStartedEvent(this.initialEvent as HammerInputExt);\n        this.initialEvent = null;\n      },\n      this.shouldDelayTouchForEvent(ev) && CONTENT_TOUCHES_DELAY\n    );\n  }\n\n  sendGestureStartedEvent(ev: HammerInputExt) {\n    clearTimeout(this.visualFeedbackTimer);\n    this.visualFeedbackTimer = null;\n    this.sendEvent({\n      ...ev,\n      eventType: Hammer.INPUT_MOVE,\n      isFirst: true,\n    });\n  }\n\n  forceInvalidate(event: HammerInputExt) {\n    super.forceInvalidate(event);\n    clearTimeout(this.visualFeedbackTimer);\n    this.visualFeedbackTimer = null;\n    this.initialEvent = null;\n  }\n\n  onRawEvent(ev: HammerInputExt) {\n    super.onRawEvent(ev);\n    if (this.isGestureRunning) {\n      if (ev.isFinal) {\n        let timeout;\n        if (this.visualFeedbackTimer) {\n          // Aesthetic timing for a quick tap.\n          // We haven't activated the tap right away to emulate iOS `delaysContentTouches`\n          // Now we must send the initial activation event and wait a set amount of time before firing the end event.\n          timeout = CONTENT_TOUCHES_QUICK_TAP_END_DELAY;\n          this.sendGestureStartedEvent(this.initialEvent as HammerInputExt);\n          this.initialEvent = null;\n        }\n        fireAfterInterval(() => {\n          this.sendEvent({\n            ...ev,\n            eventType: Hammer.INPUT_END,\n            isFinal: true,\n          });\n          // @ts-ignore -- this should explicitly support undefined\n          this.onGestureEnded();\n        }, timeout);\n      } else {\n        this.sendEvent({\n          ...ev,\n          eventType: Hammer.INPUT_MOVE,\n          isFinal: false,\n        });\n      }\n    }\n  }\n\n  updateGestureConfig({\n    shouldActivateOnStart = false,\n    disallowInterruption = false,\n    shouldCancelWhenOutside = true,\n    minDurationMs = Number.NaN,\n    maxDist = Number.NaN,\n    minPointers = 1,\n    maxPointers = 1,\n    ...props\n  }) {\n    return super.updateGestureConfig({\n      shouldActivateOnStart,\n      disallowInterruption,\n      shouldCancelWhenOutside,\n      minDurationMs,\n      maxDist,\n      minPointers,\n      maxPointers,\n      ...props,\n    });\n  }\n}\nexport default PressGestureHandler;\n"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}