{"ast":null,"code":"import React,{useState,useMemo,useRef,useEffect,useCallback}from'react';import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import View from\"react-native-web/dist/exports/View\";import FlatList from\"react-native-web/dist/exports/FlatList\";import RefreshControl from\"react-native-web/dist/exports/RefreshControl\";import Text from\"react-native-web/dist/exports/Text\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import Animated from\"react-native-web/dist/exports/Animated\";import Platform from\"react-native-web/dist/exports/Platform\";import ScrollView from\"react-native-web/dist/exports/ScrollView\";import{StoriesRow}from'@/components/home/StoriesRow';import{PostCard}from'@/components/home/PostCard';import{NewPostsButton}from'@/components/home/NewPostsButton';import{CaughtUpMessage}from'@/components/home/CaughtUpMessage';import{SuggestedFriendsRow}from'@/components/discover/SuggestedFriendsRow';import SponsoredPost from'@/components/ads/SponsoredPost';import{mockStories}from'@/mocks/stories';import{sponsoredAds}from'@/mocks/ads';import{mockVoicePosts}from'@/mocks/voice-posts';import{useTheme}from'@/hooks/theme-store';import{useVoicePosts}from'@/hooks/voice-posts-store';import{useTrending}from'@/hooks/trending-store';import{useFeed}from'@/hooks/feed-store';import{router}from'expo-router';import{VoicePostCard}from'@/components/voice/VoicePostCard';import{TrendingUp,Flame,MapPin,Hash,Globe,MapPinned,Music,Video,Calendar}from'lucide-react-native';import*as Haptics from'expo-haptics';import{FloatingActionMenu}from'@/components/home/FloatingActionMenu';import{LiveFeedCard}from'@/components/home/LiveFeedCard';import SuggestedSpills from'@/components/spill/SuggestedSpills';import{trpc}from'@/lib/trpc';import{VibePostCard}from'@/components/vibepost/VibePostCard';import{useVibePosts}from'@/hooks/vibepost-store';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function HomeScreen(){console.log('[HomeScreen] Rendering home screen');const{colors}=useTheme();const{topics,trendingPosts,refreshTrending,isRefreshing:isTrendingRefreshing,filters,updateFilters,getBreakingTopics}=useTrending();const{posts:feedPosts,isRefreshing:isFeedRefreshing,refreshFeed,newPostsCount,hasNewPosts,loadNewPosts,addPost}=useFeed();const{voicePosts,likeVoicePost,saveVoicePost,incrementShares}=useVoicePosts();const{vibePosts}=useVibePosts();const liveStreamsQuery=trpc.live.list.useQuery({limit:10});const[stories]=useState(mockStories);const[ads]=useState(sponsoredAds);const[displayVoicePosts]=useState(mockVoicePosts);const[feedMode,setFeedMode]=useState('for_you');const[trendingCategory,setTrendingCategory]=useState('for_you');const[showNewPostsButton,setShowNewPostsButton]=useState(false);const flatListRef=useRef(null);const scrollY=useRef(new Animated.Value(0)).current;const scrollYValue=useRef(0);const refreshIconRotation=useRef(new Animated.Value(0)).current;useEffect(()=>{if(hasNewPosts&&newPostsCount>0&&scrollYValue.current>100){setShowNewPostsButton(true);}else{setShowNewPostsButton(false);}},[hasNewPosts,newPostsCount]);const onRefresh=useCallback(async()=>{if(false){Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);}const animation=Animated.loop(Animated.timing(refreshIconRotation,{toValue:1,duration:1000,useNativeDriver:true}));animation.start();if(feedMode==='trending'){await refreshTrending();}else{await refreshFeed();}animation.stop();refreshIconRotation.setValue(0);if(false){Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success);}},[feedMode,refreshTrending,refreshFeed,refreshIconRotation]);const displayPosts=useMemo(()=>{const posts=feedMode==='trending'?trendingPosts.slice(0,10):feedPosts;const liveStreams=liveStreamsQuery.data||[];const postsWithAds=[];let voicePostIndex=0;let vibePostIndex=0;let liveStreamIndex=0;if(feedMode==='for_you'&&liveStreams.length>0&&liveStreamIndex<liveStreams.length){postsWithAds.push(Object.assign({},liveStreams[liveStreamIndex],{isLiveStream:true}));liveStreamIndex++;}posts.forEach((post,index)=>{postsWithAds.push(post);if(feedMode==='for_you'){if(index===1&&displayVoicePosts[voicePostIndex]){postsWithAds.push(Object.assign({},displayVoicePosts[voicePostIndex],{isVoicePost:true}));voicePostIndex++;}else if(index===2&&vibePosts[vibePostIndex]){postsWithAds.push(Object.assign({},vibePosts[vibePostIndex],{isVibePost:true}));vibePostIndex++;}else if(index===3&&ads[0]){postsWithAds.push(Object.assign({},ads[0],{isAd:true}));}else if(index===4&&liveStreams.length>liveStreamIndex){postsWithAds.push(Object.assign({},liveStreams[liveStreamIndex],{isLiveStream:true}));liveStreamIndex++;}else if(index===5&&displayVoicePosts[voicePostIndex]){postsWithAds.push(Object.assign({},displayVoicePosts[voicePostIndex],{isVoicePost:true}));voicePostIndex++;}else if(index===7&&vibePosts[vibePostIndex]){postsWithAds.push(Object.assign({},vibePosts[vibePostIndex],{isVibePost:true}));vibePostIndex++;}else if(index===8&&ads[1]){postsWithAds.push(Object.assign({},ads[1],{isAd:true}));}else if(index===10&&displayVoicePosts[voicePostIndex]){postsWithAds.push(Object.assign({},displayVoicePosts[voicePostIndex],{isVoicePost:true}));voicePostIndex++;}else if(index===11&&vibePosts[vibePostIndex]){postsWithAds.push(Object.assign({},vibePosts[vibePostIndex],{isVibePost:true}));vibePostIndex++;}else if(index===12&&liveStreams.length>liveStreamIndex){postsWithAds.push(Object.assign({},liveStreams[liveStreamIndex],{isLiveStream:true}));liveStreamIndex++;}else if(index===14&&ads[2]){postsWithAds.push(Object.assign({},ads[2],{isAd:true}));}}});return postsWithAds;},[feedMode,trendingPosts,feedPosts,ads,displayVoicePosts,vibePosts,liveStreamsQuery.data]);const handleLoadNewPosts=useCallback(async()=>{if(false){Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium);}await loadNewPosts();setShowNewPostsButton(false);flatListRef.current?.scrollToOffset({offset:0,animated:true});},[loadNewPosts]);const handleStoryPress=useCallback(storyId=>{router.push(`/story/${storyId}`);},[]);const handleCreateStory=useCallback(()=>{router.push('/status/create');},[]);const handleLikePress=useCallback(postId=>{console.log('Like pressed for post:',postId);},[]);const handleCommentPress=useCallback(postId=>{router.push(`/post/${postId}`);},[]);const handleSharePress=useCallback(postId=>{console.log('Share pressed for post:',postId);},[]);const handlePostPress=useCallback(postId=>{router.push(`/post/${postId}`);},[]);const handleVibePost=useCallback(async(content,attachments)=>{console.log('New vibe posted:',content,'with attachments:',attachments);await addPost(content,attachments);if(false){Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success);}},[addPost]);const isRefreshing=feedMode==='trending'?isTrendingRefreshing:isFeedRefreshing;const handleVoiceLike=useCallback(postId=>{likeVoicePost(postId);},[likeVoicePost]);const handleVoiceSave=useCallback(postId=>{saveVoicePost(postId);},[saveVoicePost]);const handleVoiceShare=useCallback(postId=>{incrementShares(postId);console.log('Share voice post:',postId);},[incrementShares]);const renderItem=useCallback(({item,index})=>{if(item.isAd){return _jsx(SponsoredPost,{ad:item},`ad-${item.id}`);}if(item.isLiveStream){return _jsx(LiveFeedCard,{id:item.id,userId:item.userId,username:item.username||'liveuser',displayName:item.displayName||'Live User',avatar:item.avatar||'https://i.pravatar.cc/150',title:item.title,thumbnailUrl:item.thumbnailUrl,viewerCount:item.viewerCount,startedAt:new Date(item.startedAt)},`live-${item.id}`);}if(item.isVoicePost){const voicePost=item;return _jsx(VoicePostCard,{id:voicePost.id,author:voicePost.author,caption:voicePost.caption,voiceNote:voicePost.voiceNote,coverImage:voicePost.coverImage,likes:voicePost.likes,comments:voicePost.comments,shares:voicePost.shares,timestamp:voicePost.timestamp,isLiked:voicePost.isLiked,isSaved:voicePost.isSaved,onLike:()=>handleVoiceLike(voicePost.id),onComment:()=>handleCommentPress(voicePost.id),onShare:()=>handleVoiceShare(voicePost.id),onSave:()=>handleVoiceSave(voicePost.id)},`voice-${voicePost.id}`);}if(item.isVibePost){const vibePost=item;return _jsx(View,{style:{paddingHorizontal:16},children:_jsx(VibePostCard,{post:vibePost,autoplay:false})},`vibe-${vibePost.id}`);}const trendingPost=item;const isTrending='trendingScore'in item;const shouldShowSuggestions=feedMode==='for_you'&&(index===10||index===25||index===40);return _jsxs(View,{children:[shouldShowSuggestions&&_jsx(SuggestedFriendsRow,{maxSuggestions:10}),isTrending&&trendingPost.trendingRank===1&&_jsxs(View,{style:[styles.trendingBanner,{backgroundColor:colors.card}],children:[_jsx(Flame,{size:16,color:colors.error}),_jsx(Text,{style:[styles.trendingBannerText,{color:colors.text}],children:\"Trending Now\"})]}),_jsx(PostCard,{post:item,onPress:handlePostPress,onLike:handleLikePress,onComment:handleCommentPress,onShare:handleSharePress}),isTrending&&_jsxs(View,{style:[styles.trendingIndicator,{backgroundColor:colors.card}],children:[_jsx(TrendingUp,{size:14,color:colors.primary}),_jsxs(Text,{style:[styles.trendingIndicatorText,{color:colors.textSecondary}],children:[\"#\",trendingPost.trendingRank,\" Trending \\u2022 \",trendingPost.trendingScore.toFixed(1),\" score \\u2022 \",trendingPost.velocity.toFixed(1),\"x velocity\"]})]})]},item.id);},[colors,feedMode,handlePostPress,handleLikePress,handleCommentPress,handleSharePress,handleVoiceLike,handleVoiceSave,handleVoiceShare]);const keyExtractor=useCallback(item=>item.id,[]);const onScroll=Animated.event([{nativeEvent:{contentOffset:{y:scrollY}}}],{useNativeDriver:false,listener:event=>{scrollYValue.current=event.nativeEvent.contentOffset.y;}});const ListHeaderComponent=useMemo(()=>_jsxs(View,{children:[_jsx(StoriesRow,{stories:stories,onStoryPress:handleStoryPress,onCreateStory:handleCreateStory}),feedMode==='for_you'&&_jsx(SuggestedSpills,{}),_jsxs(View,{style:[styles.feedModeSelector,{borderBottomColor:colors.border}],children:[_jsx(TouchableOpacity,{style:[styles.feedModeButton,feedMode==='for_you'&&[styles.feedModeButtonActive,{borderBottomColor:colors.primary}]],onPress:()=>setFeedMode('for_you'),children:_jsx(Text,{style:[styles.feedModeButtonText,{color:feedMode==='for_you'?colors.text:colors.textSecondary},feedMode==='for_you'&&styles.feedModeButtonTextActive],children:\"For You\"})}),_jsxs(TouchableOpacity,{style:[styles.feedModeButton,feedMode==='trending'&&[styles.feedModeButtonActive,{borderBottomColor:colors.primary}]],onPress:()=>setFeedMode('trending'),children:[_jsx(Flame,{size:16,color:feedMode==='trending'?colors.error:colors.textSecondary}),_jsx(Text,{style:[styles.feedModeButtonText,{color:feedMode==='trending'?colors.text:colors.textSecondary},feedMode==='trending'&&styles.feedModeButtonTextActive],children:\"Trending\"})]})]}),feedMode==='trending'&&_jsxs(View,{children:[_jsxs(ScrollView,{horizontal:true,showsHorizontalScrollIndicator:false,style:styles.categoryScroll,contentContainerStyle:styles.categoryScrollContent,children:[_jsxs(TouchableOpacity,{style:[styles.categoryChip,trendingCategory==='for_you'&&[styles.categoryChipActive,{backgroundColor:colors.primary}]],onPress:()=>{setTrendingCategory('for_you');updateFilters({category:'for_you'});},children:[_jsx(Flame,{size:16,color:trendingCategory==='for_you'?colors.textInverse:colors.text}),_jsx(Text,{style:[styles.categoryChipText,trendingCategory==='for_you'&&[styles.categoryChipTextActive,{color:colors.textInverse}]],children:\"For You\"})]}),_jsxs(TouchableOpacity,{style:[styles.categoryChip,trendingCategory==='global'&&[styles.categoryChipActive,{backgroundColor:colors.primary}]],onPress:()=>{setTrendingCategory('global');updateFilters({category:'global'});},children:[_jsx(Globe,{size:16,color:trendingCategory==='global'?colors.textInverse:colors.text}),_jsx(Text,{style:[styles.categoryChipText,trendingCategory==='global'&&[styles.categoryChipTextActive,{color:colors.textInverse}]],children:\"Global\"})]}),_jsxs(TouchableOpacity,{style:[styles.categoryChip,trendingCategory==='local'&&[styles.categoryChipActive,{backgroundColor:colors.primary}]],onPress:()=>{setTrendingCategory('local');updateFilters({category:'local'});},children:[_jsx(MapPinned,{size:16,color:trendingCategory==='local'?colors.textInverse:colors.text}),_jsx(Text,{style:[styles.categoryChipText,trendingCategory==='local'&&[styles.categoryChipTextActive,{color:colors.textInverse}]],children:\"Local\"})]}),_jsxs(TouchableOpacity,{style:[styles.categoryChip,trendingCategory==='music'&&[styles.categoryChipActive,{backgroundColor:colors.primary}]],onPress:()=>{setTrendingCategory('music');updateFilters({category:'music'});},children:[_jsx(Music,{size:16,color:trendingCategory==='music'?colors.textInverse:colors.text}),_jsx(Text,{style:[styles.categoryChipText,trendingCategory==='music'&&[styles.categoryChipTextActive,{color:colors.textInverse}]],children:\"Music\"})]}),_jsxs(TouchableOpacity,{style:[styles.categoryChip,trendingCategory==='content'&&[styles.categoryChipActive,{backgroundColor:colors.primary}]],onPress:()=>{setTrendingCategory('content');updateFilters({category:'content'});},children:[_jsx(Video,{size:16,color:trendingCategory==='content'?colors.textInverse:colors.text}),_jsx(Text,{style:[styles.categoryChipText,trendingCategory==='content'&&[styles.categoryChipTextActive,{color:colors.textInverse}]],children:\"Content\"})]}),_jsxs(TouchableOpacity,{style:[styles.categoryChip,trendingCategory==='events'&&[styles.categoryChipActive,{backgroundColor:colors.primary}]],onPress:()=>{setTrendingCategory('events');updateFilters({category:'events'});},children:[_jsx(Calendar,{size:16,color:trendingCategory==='events'?colors.textInverse:colors.text}),_jsx(Text,{style:[styles.categoryChipText,trendingCategory==='events'&&[styles.categoryChipTextActive,{color:colors.textInverse}]],children:\"Events\"})]})]}),_jsxs(View,{style:[styles.trendingHeader,{backgroundColor:colors.card}],children:[_jsx(Text,{style:[styles.trendingHeaderTitle,{color:colors.text}],children:\"\\uD83D\\uDD25 What's Happening\"}),_jsx(Text,{style:[styles.trendingHeaderSubtitle,{color:colors.textSecondary}],children:trendingCategory==='for_you'?'Personalized trending topics':trendingCategory==='global'?'Worldwide trends':trendingCategory==='local'?'Trending near you':trendingCategory==='music'?'Trending music & artists':trendingCategory==='content'?'Viral content & videos':'Upcoming & live events'})]}),topics.slice(0,5).map(item=>{const statusEmoji=item.status==='breaking'?'ðŸ”¥':item.status==='peaking'?'ðŸ“ˆ':item.status==='fading'?'ðŸ“‰':'âš¡';const statusColor=item.status==='breaking'?colors.error:item.status==='peaking'?colors.success:colors.textSecondary;return _jsx(TouchableOpacity,{style:[styles.trendingItem,{backgroundColor:colors.card}],onPress:()=>{if(item.hashtag){router.push(`/hashtag/${item.hashtag.slice(1)}`);}},children:_jsx(View,{style:styles.trendingItemHeader,children:_jsxs(View,{style:styles.trendingItemInfo,children:[_jsxs(View,{style:styles.trendingItemMeta,children:[_jsx(MapPin,{size:12,color:colors.textSecondary}),_jsx(Text,{style:[styles.trendingLocation,{color:colors.textSecondary}],children:item.location}),_jsxs(Text,{style:[styles.trendingCategory,{color:colors.textSecondary}],children:[\"\\u2022 \",item.category]}),_jsx(View,{style:[styles.statusBadge,{backgroundColor:statusColor+'20'}],children:_jsxs(Text,{style:[styles.statusText,{color:statusColor}],children:[statusEmoji,\" \",item.status]})})]}),_jsxs(View,{style:styles.trendingItemTitle,children:[_jsx(TrendingUp,{size:16,color:colors.primary}),_jsx(Text,{style:[styles.trendingTitle,{color:colors.text}],children:item.title})]}),item.description&&_jsx(Text,{style:[styles.trendingDescription,{color:colors.textSecondary}],numberOfLines:2,children:item.description}),item.hashtag&&_jsxs(View,{style:styles.hashtagContainer,children:[_jsx(Hash,{size:14,color:colors.primary}),_jsx(Text,{style:[styles.hashtag,{color:colors.primary}],children:item.hashtag.slice(1)})]}),_jsxs(View,{style:styles.trendingStatsRow,children:[_jsxs(Text,{style:[styles.trendingStats,{color:colors.textSecondary}],children:[item.posts.toLocaleString(),\" posts \\u2022 \",(item.engagement/1000).toFixed(1),\"K interactions\"]}),_jsxs(View,{style:styles.velocityBadge,children:[_jsx(TrendingUp,{size:12,color:colors.primary}),_jsxs(Text,{style:[styles.velocityText,{color:colors.primary}],children:[item.velocity.toFixed(1),\"x\"]})]})]})]})})},item.id);}),_jsxs(TouchableOpacity,{style:[styles.viewAllButton,{backgroundColor:colors.card}],onPress:()=>router.push('/trending'),children:[_jsx(Text,{style:[styles.viewAllButtonText,{color:colors.primary}],children:\"View All Trending Topics\"}),_jsx(TrendingUp,{size:16,color:colors.primary})]})]})]}),[stories,handleStoryPress,handleCreateStory,colors,feedMode,trendingCategory,topics,updateFilters]);const ListFooterComponent=useMemo(()=>displayPosts.length>0&&feedMode==='for_you'?_jsx(CaughtUpMessage,{}):null,[displayPosts.length,feedMode]);return _jsxs(View,{style:[styles.container,{backgroundColor:colors.background}],children:[newPostsCount>0&&_jsx(NewPostsButton,{count:newPostsCount,onPress:handleLoadNewPosts,visible:showNewPostsButton&&feedMode==='for_you'}),_jsx(FlatList,{ref:flatListRef,data:displayPosts,keyExtractor:keyExtractor,renderItem:renderItem,ListHeaderComponent:ListHeaderComponent,onScroll:onScroll,scrollEventThrottle:16,refreshControl:_jsx(RefreshControl,{refreshing:isRefreshing,onRefresh:onRefresh,tintColor:colors.primary,title:\"Pull to refresh\",titleColor:colors.textSecondary}),ListFooterComponent:ListFooterComponent,showsVerticalScrollIndicator:false,contentContainerStyle:styles.contentContainer,removeClippedSubviews:true,maxToRenderPerBatch:5,updateCellsBatchingPeriod:50,initialNumToRender:5,windowSize:10}),_jsx(FloatingActionMenu,{})]});}const styles=StyleSheet.create({container:{flex:1},contentContainer:{paddingBottom:100},feedModeSelector:{flexDirection:'row',borderBottomWidth:1,marginTop:8},feedModeButton:{flex:1,flexDirection:'row',alignItems:'center',justifyContent:'center',paddingVertical:12,gap:6},feedModeButtonActive:{borderBottomWidth:2},feedModeButtonText:{fontSize:15,fontWeight:'500'},feedModeButtonTextActive:{fontWeight:'700'},trendingBanner:{flexDirection:'row',alignItems:'center',justifyContent:'center',paddingVertical:8,paddingHorizontal:16,marginHorizontal:16,marginTop:12,marginBottom:8,borderRadius:8,gap:8},trendingBannerText:{fontSize:14,fontWeight:'700'},trendingIndicator:{flexDirection:'row',alignItems:'center',paddingVertical:6,paddingHorizontal:16,marginHorizontal:16,marginBottom:8,borderRadius:6,gap:6},trendingIndicatorText:{fontSize:11,fontWeight:'500'},categoryScroll:{maxHeight:50,borderBottomWidth:1,borderBottomColor:'#1F1F1F'},categoryScrollContent:{paddingHorizontal:16,paddingVertical:8,gap:8},categoryChip:{flexDirection:'row',alignItems:'center',paddingHorizontal:16,paddingVertical:8,borderRadius:20,backgroundColor:'#1A1A1A',gap:6},categoryChipActive:{backgroundColor:'#1DA1F2'},categoryChipText:{fontSize:14,fontWeight:'500'},categoryChipTextActive:{fontWeight:'600'},trendingHeader:{padding:16,marginHorizontal:16,marginTop:16,marginBottom:8,borderRadius:12},trendingHeaderTitle:{fontSize:18,fontWeight:'700',marginBottom:4},trendingHeaderSubtitle:{fontSize:14},trendingItem:{borderBottomWidth:1,borderBottomColor:'#1F1F1F',paddingHorizontal:16,paddingVertical:16},trendingItemHeader:{flexDirection:'row',justifyContent:'space-between',alignItems:'flex-start'},trendingItemInfo:{flex:1},trendingItemMeta:{flexDirection:'row',alignItems:'center',marginBottom:4},trendingLocation:{fontSize:12,marginLeft:4},trendingCategory:{fontSize:12,textTransform:'capitalize',marginLeft:4},trendingItemTitle:{flexDirection:'row',alignItems:'center',marginBottom:6},trendingTitle:{fontSize:16,fontWeight:'600',marginLeft:6},hashtagContainer:{flexDirection:'row',alignItems:'center',marginBottom:6},hashtag:{fontSize:14,fontWeight:'500',marginLeft:4},trendingStats:{fontSize:12},statusBadge:{paddingHorizontal:8,paddingVertical:2,borderRadius:10,marginLeft:8},statusText:{fontSize:10,fontWeight:'600',textTransform:'capitalize'},trendingDescription:{fontSize:13,marginBottom:6,lineHeight:18},trendingStatsRow:{flexDirection:'row',justifyContent:'space-between',alignItems:'center'},velocityBadge:{flexDirection:'row',alignItems:'center',gap:4},velocityText:{fontSize:12,fontWeight:'600'},viewAllButton:{flexDirection:'row',alignItems:'center',justifyContent:'center',paddingVertical:16,marginHorizontal:16,marginTop:8,marginBottom:16,borderRadius:12,gap:8},viewAllButtonText:{fontSize:15,fontWeight:'600'}});","map":{"version":3,"names":["React","useState","useMemo","useRef","useEffect","useCallback","StyleSheet","View","FlatList","RefreshControl","Text","TouchableOpacity","Animated","Platform","ScrollView","StoriesRow","PostCard","NewPostsButton","CaughtUpMessage","SuggestedFriendsRow","SponsoredPost","mockStories","sponsoredAds","mockVoicePosts","useTheme","useVoicePosts","useTrending","useFeed","router","VoicePostCard","TrendingUp","Flame","MapPin","Hash","Globe","MapPinned","Music","Video","Calendar","Haptics","FloatingActionMenu","LiveFeedCard","SuggestedSpills","trpc","VibePostCard","useVibePosts","jsx","_jsx","jsxs","_jsxs","HomeScreen","console","log","colors","topics","trendingPosts","refreshTrending","isRefreshing","isTrendingRefreshing","filters","updateFilters","getBreakingTopics","posts","feedPosts","isFeedRefreshing","refreshFeed","newPostsCount","hasNewPosts","loadNewPosts","addPost","voicePosts","likeVoicePost","saveVoicePost","incrementShares","vibePosts","liveStreamsQuery","live","list","useQuery","limit","stories","ads","displayVoicePosts","feedMode","setFeedMode","trendingCategory","setTrendingCategory","showNewPostsButton","setShowNewPostsButton","flatListRef","scrollY","Value","current","scrollYValue","refreshIconRotation","onRefresh","impactAsync","ImpactFeedbackStyle","Light","animation","loop","timing","toValue","duration","useNativeDriver","start","stop","setValue","notificationAsync","NotificationFeedbackType","Success","displayPosts","slice","liveStreams","data","postsWithAds","voicePostIndex","vibePostIndex","liveStreamIndex","length","push","Object","assign","isLiveStream","forEach","post","index","isVoicePost","isVibePost","isAd","handleLoadNewPosts","Medium","scrollToOffset","offset","animated","handleStoryPress","storyId","handleCreateStory","handleLikePress","postId","handleCommentPress","handleSharePress","handlePostPress","handleVibePost","content","attachments","handleVoiceLike","handleVoiceSave","handleVoiceShare","renderItem","item","ad","id","userId","username","displayName","avatar","title","thumbnailUrl","viewerCount","startedAt","Date","voicePost","author","caption","voiceNote","coverImage","likes","comments","shares","timestamp","isLiked","isSaved","onLike","onComment","onShare","onSave","vibePost","style","paddingHorizontal","children","autoplay","trendingPost","isTrending","shouldShowSuggestions","maxSuggestions","trendingRank","styles","trendingBanner","backgroundColor","card","size","color","error","trendingBannerText","text","onPress","trendingIndicator","primary","trendingIndicatorText","textSecondary","trendingScore","toFixed","velocity","keyExtractor","onScroll","event","nativeEvent","contentOffset","y","listener","ListHeaderComponent","onStoryPress","onCreateStory","feedModeSelector","borderBottomColor","border","feedModeButton","feedModeButtonActive","feedModeButtonText","feedModeButtonTextActive","horizontal","showsHorizontalScrollIndicator","categoryScroll","contentContainerStyle","categoryScrollContent","categoryChip","categoryChipActive","category","textInverse","categoryChipText","categoryChipTextActive","trendingHeader","trendingHeaderTitle","trendingHeaderSubtitle","map","statusEmoji","status","statusColor","success","trendingItem","hashtag","trendingItemHeader","trendingItemInfo","trendingItemMeta","trendingLocation","location","statusBadge","statusText","trendingItemTitle","trendingTitle","description","trendingDescription","numberOfLines","hashtagContainer","trendingStatsRow","trendingStats","toLocaleString","engagement","velocityBadge","velocityText","viewAllButton","viewAllButtonText","ListFooterComponent","container","background","count","visible","ref","scrollEventThrottle","refreshControl","refreshing","tintColor","titleColor","showsVerticalScrollIndicator","contentContainer","removeClippedSubviews","maxToRenderPerBatch","updateCellsBatchingPeriod","initialNumToRender","windowSize","create","flex","paddingBottom","flexDirection","borderBottomWidth","marginTop","alignItems","justifyContent","paddingVertical","gap","fontSize","fontWeight","marginHorizontal","marginBottom","borderRadius","maxHeight","padding","marginLeft","textTransform","lineHeight"],"sources":["/home/user/rork-vibesync-458/app/(tabs)/index.tsx"],"sourcesContent":["import React, { useState, useMemo, useRef, useEffect, useCallback } from 'react';\nimport { StyleSheet, View, FlatList, RefreshControl, Text, TouchableOpacity, Animated, Platform, ScrollView } from 'react-native';\nimport { StoriesRow } from '@/components/home/StoriesRow';\nimport { PostCard } from '@/components/home/PostCard';\nimport { QuickVibe } from '@/components/home/QuickVibe';\nimport { NewPostsButton } from '@/components/home/NewPostsButton';\nimport { CaughtUpMessage } from '@/components/home/CaughtUpMessage';\nimport { SuggestedFriendsRow } from '@/components/discover/SuggestedFriendsRow';\n\nimport SponsoredPost from '@/components/ads/SponsoredPost';\nimport { mockStories } from '@/mocks/stories';\nimport { sponsoredAds } from '@/mocks/ads';\nimport { mockVoicePosts } from '@/mocks/voice-posts';\nimport { useTheme } from '@/hooks/theme-store';\nimport { useVoicePosts } from '@/hooks/voice-posts-store';\nimport { useTrending } from '@/hooks/trending-store';\nimport { useFeed } from '@/hooks/feed-store';\nimport { router } from 'expo-router';\nimport { TrendingPost, VoicePost } from '@/types';\nimport { VoicePostCard } from '@/components/voice/VoicePostCard';\nimport { TrendingUp, Flame, MapPin, Hash, Globe, MapPinned, Music, Video, Calendar } from 'lucide-react-native';\nimport * as Haptics from 'expo-haptics';\nimport { FloatingActionMenu } from '@/components/home/FloatingActionMenu';\nimport { LiveFeedCard } from '@/components/home/LiveFeedCard';\nimport SuggestedSpills from '@/components/spill/SuggestedSpills';\nimport { trpc } from '@/lib/trpc';\nimport { VibePostCard } from '@/components/vibepost/VibePostCard';\nimport { useVibePosts } from '@/hooks/vibepost-store';\nimport { VibePost } from '@/types/vibepost';\n\nexport default function HomeScreen() {\n  console.log('[HomeScreen] Rendering home screen');\n  const { colors } = useTheme();\n  const { \n    topics,\n    trendingPosts, \n    refreshTrending, \n    isRefreshing: isTrendingRefreshing,\n    filters,\n    updateFilters,\n    getBreakingTopics\n  } = useTrending();\n  const { posts: feedPosts, isRefreshing: isFeedRefreshing, refreshFeed, newPostsCount, hasNewPosts, loadNewPosts, addPost } = useFeed();\n  const { voicePosts, likeVoicePost, saveVoicePost, incrementShares } = useVoicePosts();\n  const { vibePosts } = useVibePosts();\n  const liveStreamsQuery = trpc.live.list.useQuery({ limit: 10 });\n  const [stories] = useState(mockStories);\n  const [ads] = useState(sponsoredAds);\n  const [displayVoicePosts] = useState(mockVoicePosts);\n  const [feedMode, setFeedMode] = useState<'for_you' | 'trending'>('for_you');\n  const [trendingCategory, setTrendingCategory] = useState<typeof filters.category>('for_you');\n  const [showNewPostsButton, setShowNewPostsButton] = useState(false);\n  const flatListRef = useRef<FlatList>(null);\n  const scrollY = useRef(new Animated.Value(0)).current;\n  const scrollYValue = useRef(0);\n  const refreshIconRotation = useRef(new Animated.Value(0)).current;\n\n  useEffect(() => {\n    if (hasNewPosts && newPostsCount > 0 && scrollYValue.current > 100) {\n      setShowNewPostsButton(true);\n    } else {\n      setShowNewPostsButton(false);\n    }\n  }, [hasNewPosts, newPostsCount]);\n\n  const onRefresh = useCallback(async () => {\n    if (Platform.OS !== 'web') {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);\n    }\n\n    const animation = Animated.loop(\n      Animated.timing(refreshIconRotation, {\n        toValue: 1,\n        duration: 1000,\n        useNativeDriver: true,\n      })\n    );\n    animation.start();\n\n    if (feedMode === 'trending') {\n      await refreshTrending();\n    } else {\n      await refreshFeed();\n    }\n\n    animation.stop();\n    refreshIconRotation.setValue(0);\n\n    if (Platform.OS !== 'web') {\n      Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success);\n    }\n  }, [feedMode, refreshTrending, refreshFeed, refreshIconRotation]);\n  \n  const displayPosts = useMemo(() => {\n    const posts = feedMode === 'trending' ? trendingPosts.slice(0, 10) : feedPosts;\n    const liveStreams = liveStreamsQuery.data || [];\n    \n    const postsWithAds: any[] = [];\n    let voicePostIndex = 0;\n    let vibePostIndex = 0;\n    let liveStreamIndex = 0;\n    \n    if (feedMode === 'for_you' && liveStreams.length > 0 && liveStreamIndex < liveStreams.length) {\n      postsWithAds.push({ ...liveStreams[liveStreamIndex], isLiveStream: true });\n      liveStreamIndex++;\n    }\n    \n    posts.forEach((post, index) => {\n      postsWithAds.push(post);\n      \n      if (feedMode === 'for_you') {\n        if (index === 1 && displayVoicePosts[voicePostIndex]) {\n          postsWithAds.push({ ...displayVoicePosts[voicePostIndex], isVoicePost: true });\n          voicePostIndex++;\n        } else if (index === 2 && vibePosts[vibePostIndex]) {\n          postsWithAds.push({ ...vibePosts[vibePostIndex], isVibePost: true });\n          vibePostIndex++;\n        } else if (index === 3 && ads[0]) {\n          postsWithAds.push({ ...ads[0], isAd: true });\n        } else if (index === 4 && liveStreams.length > liveStreamIndex) {\n          postsWithAds.push({ ...liveStreams[liveStreamIndex], isLiveStream: true });\n          liveStreamIndex++;\n        } else if (index === 5 && displayVoicePosts[voicePostIndex]) {\n          postsWithAds.push({ ...displayVoicePosts[voicePostIndex], isVoicePost: true });\n          voicePostIndex++;\n        } else if (index === 7 && vibePosts[vibePostIndex]) {\n          postsWithAds.push({ ...vibePosts[vibePostIndex], isVibePost: true });\n          vibePostIndex++;\n        } else if (index === 8 && ads[1]) {\n          postsWithAds.push({ ...ads[1], isAd: true });\n        } else if (index === 10 && displayVoicePosts[voicePostIndex]) {\n          postsWithAds.push({ ...displayVoicePosts[voicePostIndex], isVoicePost: true });\n          voicePostIndex++;\n        } else if (index === 11 && vibePosts[vibePostIndex]) {\n          postsWithAds.push({ ...vibePosts[vibePostIndex], isVibePost: true });\n          vibePostIndex++;\n        } else if (index === 12 && liveStreams.length > liveStreamIndex) {\n          postsWithAds.push({ ...liveStreams[liveStreamIndex], isLiveStream: true });\n          liveStreamIndex++;\n        } else if (index === 14 && ads[2]) {\n          postsWithAds.push({ ...ads[2], isAd: true });\n        }\n      }\n    });\n    \n    return postsWithAds;\n  }, [feedMode, trendingPosts, feedPosts, ads, displayVoicePosts, vibePosts, liveStreamsQuery.data]);\n\n  const handleLoadNewPosts = useCallback(async () => {\n    if (Platform.OS !== 'web') {\n      Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium);\n    }\n    \n    await loadNewPosts();\n    setShowNewPostsButton(false);\n    \n    flatListRef.current?.scrollToOffset({ offset: 0, animated: true });\n  }, [loadNewPosts]);\n\n  const handleStoryPress = useCallback((storyId: string) => {\n    router.push(`/story/${storyId}`);\n  }, []);\n\n  const handleCreateStory = useCallback(() => {\n    router.push('/status/create');\n  }, []);\n\n  const handleLikePress = useCallback((postId: string) => {\n    console.log('Like pressed for post:', postId);\n  }, []);\n\n  const handleCommentPress = useCallback((postId: string) => {\n    router.push(`/post/${postId}`);\n  }, []);\n\n  const handleSharePress = useCallback((postId: string) => {\n    console.log('Share pressed for post:', postId);\n  }, []);\n\n  const handlePostPress = useCallback((postId: string) => {\n    router.push(`/post/${postId}`);\n  }, []);\n\n  const handleVibePost = useCallback(async (content: string, attachments?: any[]) => {\n    console.log('New vibe posted:', content, 'with attachments:', attachments);\n    await addPost(content, attachments);\n    \n    if (Platform.OS !== 'web') {\n      Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success);\n    }\n  }, [addPost]);\n\n  const isRefreshing = feedMode === 'trending' ? isTrendingRefreshing : isFeedRefreshing;\n\n  const handleVoiceLike = useCallback((postId: string) => {\n    likeVoicePost(postId);\n  }, [likeVoicePost]);\n\n  const handleVoiceSave = useCallback((postId: string) => {\n    saveVoicePost(postId);\n  }, [saveVoicePost]);\n\n  const handleVoiceShare = useCallback((postId: string) => {\n    incrementShares(postId);\n    console.log('Share voice post:', postId);\n  }, [incrementShares]);\n\n  const renderItem = useCallback(({ item, index }: { item: any; index: number }) => {\n    if (item.isAd) {\n      return <SponsoredPost key={`ad-${item.id}`} ad={item} />;\n    }\n    \n    if (item.isLiveStream) {\n      return (\n        <LiveFeedCard\n          key={`live-${item.id}`}\n          id={item.id}\n          userId={item.userId}\n          username={item.username || 'liveuser'}\n          displayName={item.displayName || 'Live User'}\n          avatar={item.avatar || 'https://i.pravatar.cc/150'}\n          title={item.title}\n          thumbnailUrl={item.thumbnailUrl}\n          viewerCount={item.viewerCount}\n          startedAt={new Date(item.startedAt)}\n        />\n      );\n    }\n    \n    if (item.isVoicePost) {\n      const voicePost = item as VoicePost;\n      return (\n        <VoicePostCard\n          key={`voice-${voicePost.id}`}\n          id={voicePost.id}\n          author={voicePost.author}\n          caption={voicePost.caption}\n          voiceNote={voicePost.voiceNote}\n          coverImage={voicePost.coverImage}\n          likes={voicePost.likes}\n          comments={voicePost.comments}\n          shares={voicePost.shares}\n          timestamp={voicePost.timestamp}\n          isLiked={voicePost.isLiked}\n          isSaved={voicePost.isSaved}\n          onLike={() => handleVoiceLike(voicePost.id)}\n          onComment={() => handleCommentPress(voicePost.id)}\n          onShare={() => handleVoiceShare(voicePost.id)}\n          onSave={() => handleVoiceSave(voicePost.id)}\n        />\n      );\n    }\n    \n    if (item.isVibePost) {\n      const vibePost = item as VibePost;\n      return (\n        <View key={`vibe-${vibePost.id}`} style={{ paddingHorizontal: 16 }}>\n          <VibePostCard post={vibePost} autoplay={false} />\n        </View>\n      );\n    }\n    \n    const trendingPost = item as TrendingPost;\n    const isTrending = 'trendingScore' in item;\n    const shouldShowSuggestions = feedMode === 'for_you' && (index === 10 || index === 25 || index === 40);\n    \n    return (\n      <View key={item.id}>\n        {shouldShowSuggestions && <SuggestedFriendsRow maxSuggestions={10} />}\n        {isTrending && trendingPost.trendingRank === 1 && (\n          <View style={[styles.trendingBanner, { backgroundColor: colors.card }]}>\n            <Flame size={16} color={colors.error} />\n            <Text style={[styles.trendingBannerText, { color: colors.text }]}>\n              Trending Now\n            </Text>\n          </View>\n        )}\n        <PostCard\n          post={item}\n          onPress={handlePostPress}\n          onLike={handleLikePress}\n          onComment={handleCommentPress}\n          onShare={handleSharePress}\n        />\n        {isTrending && (\n          <View style={[styles.trendingIndicator, { backgroundColor: colors.card }]}>\n            <TrendingUp size={14} color={colors.primary} />\n            <Text style={[styles.trendingIndicatorText, { color: colors.textSecondary }]}>\n              #{trendingPost.trendingRank} Trending â€¢ {trendingPost.trendingScore.toFixed(1)} score â€¢ {trendingPost.velocity.toFixed(1)}x velocity\n            </Text>\n          </View>\n        )}\n      </View>\n    );\n  }, [colors, feedMode, handlePostPress, handleLikePress, handleCommentPress, handleSharePress, handleVoiceLike, handleVoiceSave, handleVoiceShare]);\n\n  const keyExtractor = useCallback((item: any) => item.id, []);\n\n  const onScroll = Animated.event(\n    [{ nativeEvent: { contentOffset: { y: scrollY } } }],\n    {\n      useNativeDriver: false,\n      listener: (event: any) => {\n        scrollYValue.current = event.nativeEvent.contentOffset.y;\n      },\n    }\n  );\n\n  const ListHeaderComponent = useMemo(() => (\n    <View>\n      <StoriesRow\n        stories={stories}\n        onStoryPress={handleStoryPress}\n        onCreateStory={handleCreateStory}\n      />\n      {feedMode === 'for_you' && <SuggestedSpills />}\n      <View style={[styles.feedModeSelector, { borderBottomColor: colors.border }]}>\n        <TouchableOpacity\n          style={[\n            styles.feedModeButton,\n            feedMode === 'for_you' && [styles.feedModeButtonActive, { borderBottomColor: colors.primary }],\n          ]}\n          onPress={() => setFeedMode('for_you')}\n        >\n          <Text\n            style={[\n              styles.feedModeButtonText,\n              { color: feedMode === 'for_you' ? colors.text : colors.textSecondary },\n              feedMode === 'for_you' && styles.feedModeButtonTextActive,\n            ]}\n          >\n            For You\n          </Text>\n        </TouchableOpacity>\n        <TouchableOpacity\n          style={[\n            styles.feedModeButton,\n            feedMode === 'trending' && [styles.feedModeButtonActive, { borderBottomColor: colors.primary }],\n          ]}\n          onPress={() => setFeedMode('trending')}\n        >\n          <Flame size={16} color={feedMode === 'trending' ? colors.error : colors.textSecondary} />\n          <Text\n            style={[\n              styles.feedModeButtonText,\n              { color: feedMode === 'trending' ? colors.text : colors.textSecondary },\n              feedMode === 'trending' && styles.feedModeButtonTextActive,\n            ]}\n          >\n            Trending\n          </Text>\n        </TouchableOpacity>\n      </View>\n      {feedMode === 'trending' && (\n        <View>\n          <ScrollView \n            horizontal \n            showsHorizontalScrollIndicator={false}\n            style={styles.categoryScroll}\n            contentContainerStyle={styles.categoryScrollContent}\n          >\n            <TouchableOpacity\n              style={[\n                styles.categoryChip,\n                trendingCategory === 'for_you' && [styles.categoryChipActive, { backgroundColor: colors.primary }],\n              ]}\n              onPress={() => {\n                setTrendingCategory('for_you');\n                updateFilters({ category: 'for_you' });\n              }}\n            >\n              <Flame size={16} color={trendingCategory === 'for_you' ? colors.textInverse : colors.text} />\n              <Text style={[\n                styles.categoryChipText,\n                trendingCategory === 'for_you' && [styles.categoryChipTextActive, { color: colors.textInverse }],\n              ]}>For You</Text>\n            </TouchableOpacity>\n            \n            <TouchableOpacity\n              style={[\n                styles.categoryChip,\n                trendingCategory === 'global' && [styles.categoryChipActive, { backgroundColor: colors.primary }],\n              ]}\n              onPress={() => {\n                setTrendingCategory('global');\n                updateFilters({ category: 'global' });\n              }}\n            >\n              <Globe size={16} color={trendingCategory === 'global' ? colors.textInverse : colors.text} />\n              <Text style={[\n                styles.categoryChipText,\n                trendingCategory === 'global' && [styles.categoryChipTextActive, { color: colors.textInverse }],\n              ]}>Global</Text>\n            </TouchableOpacity>\n            \n            <TouchableOpacity\n              style={[\n                styles.categoryChip,\n                trendingCategory === 'local' && [styles.categoryChipActive, { backgroundColor: colors.primary }],\n              ]}\n              onPress={() => {\n                setTrendingCategory('local');\n                updateFilters({ category: 'local' });\n              }}\n            >\n              <MapPinned size={16} color={trendingCategory === 'local' ? colors.textInverse : colors.text} />\n              <Text style={[\n                styles.categoryChipText,\n                trendingCategory === 'local' && [styles.categoryChipTextActive, { color: colors.textInverse }],\n              ]}>Local</Text>\n            </TouchableOpacity>\n            \n            <TouchableOpacity\n              style={[\n                styles.categoryChip,\n                trendingCategory === 'music' && [styles.categoryChipActive, { backgroundColor: colors.primary }],\n              ]}\n              onPress={() => {\n                setTrendingCategory('music');\n                updateFilters({ category: 'music' });\n              }}\n            >\n              <Music size={16} color={trendingCategory === 'music' ? colors.textInverse : colors.text} />\n              <Text style={[\n                styles.categoryChipText,\n                trendingCategory === 'music' && [styles.categoryChipTextActive, { color: colors.textInverse }],\n              ]}>Music</Text>\n            </TouchableOpacity>\n            \n            <TouchableOpacity\n              style={[\n                styles.categoryChip,\n                trendingCategory === 'content' && [styles.categoryChipActive, { backgroundColor: colors.primary }],\n              ]}\n              onPress={() => {\n                setTrendingCategory('content');\n                updateFilters({ category: 'content' });\n              }}\n            >\n              <Video size={16} color={trendingCategory === 'content' ? colors.textInverse : colors.text} />\n              <Text style={[\n                styles.categoryChipText,\n                trendingCategory === 'content' && [styles.categoryChipTextActive, { color: colors.textInverse }],\n              ]}>Content</Text>\n            </TouchableOpacity>\n            \n            <TouchableOpacity\n              style={[\n                styles.categoryChip,\n                trendingCategory === 'events' && [styles.categoryChipActive, { backgroundColor: colors.primary }],\n              ]}\n              onPress={() => {\n                setTrendingCategory('events');\n                updateFilters({ category: 'events' });\n              }}\n            >\n              <Calendar size={16} color={trendingCategory === 'events' ? colors.textInverse : colors.text} />\n              <Text style={[\n                styles.categoryChipText,\n                trendingCategory === 'events' && [styles.categoryChipTextActive, { color: colors.textInverse }],\n              ]}>Events</Text>\n            </TouchableOpacity>\n          </ScrollView>\n          \n          <View style={[styles.trendingHeader, { backgroundColor: colors.card }]}>\n            <Text style={[styles.trendingHeaderTitle, { color: colors.text }]}>ðŸ”¥ What&apos;s Happening</Text>\n            <Text style={[styles.trendingHeaderSubtitle, { color: colors.textSecondary }]}>\n              {trendingCategory === 'for_you' ? 'Personalized trending topics' : \n               trendingCategory === 'global' ? 'Worldwide trends' :\n               trendingCategory === 'local' ? 'Trending near you' :\n               trendingCategory === 'music' ? 'Trending music & artists' :\n               trendingCategory === 'content' ? 'Viral content & videos' :\n               'Upcoming & live events'}\n            </Text>\n          </View>\n          \n          {topics.slice(0, 5).map((item) => {\n            const statusEmoji = item.status === 'breaking' ? 'ðŸ”¥' : item.status === 'peaking' ? 'ðŸ“ˆ' : item.status === 'fading' ? 'ðŸ“‰' : 'âš¡';\n            const statusColor = item.status === 'breaking' ? colors.error : item.status === 'peaking' ? colors.success : colors.textSecondary;\n            \n            return (\n              <TouchableOpacity \n                key={item.id}\n                style={[styles.trendingItem, { backgroundColor: colors.card }]}\n                onPress={() => {\n                  if (item.hashtag) {\n                    router.push(`/hashtag/${item.hashtag.slice(1)}`);\n                  }\n                }}\n              >\n                <View style={styles.trendingItemHeader}>\n                  <View style={styles.trendingItemInfo}>\n                    <View style={styles.trendingItemMeta}>\n                      <MapPin size={12} color={colors.textSecondary} />\n                      <Text style={[styles.trendingLocation, { color: colors.textSecondary }]}>{item.location}</Text>\n                      <Text style={[styles.trendingCategory, { color: colors.textSecondary }]}>â€¢ {item.category}</Text>\n                      <View style={[styles.statusBadge, { backgroundColor: statusColor + '20' }]}>\n                        <Text style={[styles.statusText, { color: statusColor }]}>{statusEmoji} {item.status}</Text>\n                      </View>\n                    </View>\n                    <View style={styles.trendingItemTitle}>\n                      <TrendingUp size={16} color={colors.primary} />\n                      <Text style={[styles.trendingTitle, { color: colors.text }]}>{item.title}</Text>\n                    </View>\n                    {item.description && (\n                      <Text style={[styles.trendingDescription, { color: colors.textSecondary }]} numberOfLines={2}>\n                        {item.description}\n                      </Text>\n                    )}\n                    {item.hashtag && (\n                      <View style={styles.hashtagContainer}>\n                        <Hash size={14} color={colors.primary} />\n                        <Text style={[styles.hashtag, { color: colors.primary }]}>{item.hashtag.slice(1)}</Text>\n                      </View>\n                    )}\n                    <View style={styles.trendingStatsRow}>\n                      <Text style={[styles.trendingStats, { color: colors.textSecondary }]}>\n                        {item.posts.toLocaleString()} posts â€¢ {(item.engagement / 1000).toFixed(1)}K interactions\n                      </Text>\n                      <View style={styles.velocityBadge}>\n                        <TrendingUp size={12} color={colors.primary} />\n                        <Text style={[styles.velocityText, { color: colors.primary }]}>\n                          {item.velocity.toFixed(1)}x\n                        </Text>\n                      </View>\n                    </View>\n                  </View>\n                </View>\n              </TouchableOpacity>\n            );\n          })}\n          \n          <TouchableOpacity \n            style={[styles.viewAllButton, { backgroundColor: colors.card }]}\n            onPress={() => router.push('/trending')}\n          >\n            <Text style={[styles.viewAllButtonText, { color: colors.primary }]}>View All Trending Topics</Text>\n            <TrendingUp size={16} color={colors.primary} />\n          </TouchableOpacity>\n        </View>\n      )}\n    </View>\n  ), [stories, handleStoryPress, handleCreateStory, colors, feedMode, trendingCategory, topics, updateFilters]);\n\n  const ListFooterComponent = useMemo(() => (\n    displayPosts.length > 0 && feedMode === 'for_you' ? <CaughtUpMessage /> : null\n  ), [displayPosts.length, feedMode]);\n\n  return (\n    <View style={[styles.container, { backgroundColor: colors.background }]}>\n      {newPostsCount > 0 && (\n        <NewPostsButton\n          count={newPostsCount}\n          onPress={handleLoadNewPosts}\n          visible={showNewPostsButton && feedMode === 'for_you'}\n        />\n      )}\n      <FlatList\n        ref={flatListRef}\n        data={displayPosts}\n        keyExtractor={keyExtractor}\n        renderItem={renderItem}\n        ListHeaderComponent={ListHeaderComponent}\n        onScroll={onScroll}\n        scrollEventThrottle={16}\n        refreshControl={\n          <RefreshControl\n            refreshing={isRefreshing}\n            onRefresh={onRefresh}\n            tintColor={colors.primary}\n            title=\"Pull to refresh\"\n            titleColor={colors.textSecondary}\n          />\n        }\n        ListFooterComponent={ListFooterComponent}\n        showsVerticalScrollIndicator={false}\n        contentContainerStyle={styles.contentContainer}\n        removeClippedSubviews={true}\n        maxToRenderPerBatch={5}\n        updateCellsBatchingPeriod={50}\n        initialNumToRender={5}\n        windowSize={10}\n      />\n      <FloatingActionMenu />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n\n  contentContainer: {\n    paddingBottom: 100,\n  },\n  feedModeSelector: {\n    flexDirection: 'row',\n    borderBottomWidth: 1,\n    marginTop: 8,\n  },\n  feedModeButton: {\n    flex: 1,\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingVertical: 12,\n    gap: 6,\n  },\n  feedModeButtonActive: {\n    borderBottomWidth: 2,\n  },\n  feedModeButtonText: {\n    fontSize: 15,\n    fontWeight: '500' as const,\n  },\n  feedModeButtonTextActive: {\n    fontWeight: '700' as const,\n  },\n  trendingBanner: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingVertical: 8,\n    paddingHorizontal: 16,\n    marginHorizontal: 16,\n    marginTop: 12,\n    marginBottom: 8,\n    borderRadius: 8,\n    gap: 8,\n  },\n  trendingBannerText: {\n    fontSize: 14,\n    fontWeight: '700' as const,\n  },\n  trendingIndicator: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingVertical: 6,\n    paddingHorizontal: 16,\n    marginHorizontal: 16,\n    marginBottom: 8,\n    borderRadius: 6,\n    gap: 6,\n  },\n  trendingIndicatorText: {\n    fontSize: 11,\n    fontWeight: '500' as const,\n  },\n  categoryScroll: {\n    maxHeight: 50,\n    borderBottomWidth: 1,\n    borderBottomColor: '#1F1F1F',\n  },\n  categoryScrollContent: {\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    gap: 8,\n  },\n  categoryChip: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    borderRadius: 20,\n    backgroundColor: '#1A1A1A',\n    gap: 6,\n  },\n  categoryChipActive: {\n    backgroundColor: '#1DA1F2',\n  },\n  categoryChipText: {\n    fontSize: 14,\n    fontWeight: '500' as const,\n  },\n  categoryChipTextActive: {\n    fontWeight: '600' as const,\n  },\n  trendingHeader: {\n    padding: 16,\n    marginHorizontal: 16,\n    marginTop: 16,\n    marginBottom: 8,\n    borderRadius: 12,\n  },\n  trendingHeaderTitle: {\n    fontSize: 18,\n    fontWeight: '700' as const,\n    marginBottom: 4,\n  },\n  trendingHeaderSubtitle: {\n    fontSize: 14,\n  },\n  trendingItem: {\n    borderBottomWidth: 1,\n    borderBottomColor: '#1F1F1F',\n    paddingHorizontal: 16,\n    paddingVertical: 16,\n  },\n  trendingItemHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'flex-start',\n  },\n  trendingItemInfo: {\n    flex: 1,\n  },\n  trendingItemMeta: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 4,\n  },\n  trendingLocation: {\n    fontSize: 12,\n    marginLeft: 4,\n  },\n  trendingCategory: {\n    fontSize: 12,\n    textTransform: 'capitalize' as const,\n    marginLeft: 4,\n  },\n  trendingItemTitle: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 6,\n  },\n  trendingTitle: {\n    fontSize: 16,\n    fontWeight: '600' as const,\n    marginLeft: 6,\n  },\n  hashtagContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 6,\n  },\n  hashtag: {\n    fontSize: 14,\n    fontWeight: '500' as const,\n    marginLeft: 4,\n  },\n  trendingStats: {\n    fontSize: 12,\n  },\n  statusBadge: {\n    paddingHorizontal: 8,\n    paddingVertical: 2,\n    borderRadius: 10,\n    marginLeft: 8,\n  },\n  statusText: {\n    fontSize: 10,\n    fontWeight: '600' as const,\n    textTransform: 'capitalize' as const,\n  },\n  trendingDescription: {\n    fontSize: 13,\n    marginBottom: 6,\n    lineHeight: 18,\n  },\n  trendingStatsRow: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n  },\n  velocityBadge: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 4,\n  },\n  velocityText: {\n    fontSize: 12,\n    fontWeight: '600' as const,\n  },\n  viewAllButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingVertical: 16,\n    marginHorizontal: 16,\n    marginTop: 8,\n    marginBottom: 16,\n    borderRadius: 12,\n    gap: 8,\n  },\n  viewAllButtonText: {\n    fontSize: 15,\n    fontWeight: '600' as const,\n  },\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}