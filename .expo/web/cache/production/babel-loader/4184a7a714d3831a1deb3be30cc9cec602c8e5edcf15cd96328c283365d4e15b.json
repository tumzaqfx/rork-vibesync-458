{"ast":null,"code":"import{Platform}from'expo-modules-core';import PixelRatio from\"react-native-web/dist/exports/PixelRatio\";function getScaledAssetPath(asset){const scale=AssetSourceResolver.pickScale(asset.scales,PixelRatio.get());const scaleSuffix=scale===1?'':'@'+scale+'x';const type=!asset.type?'':`.${asset.type}`;if(false){return asset.httpServerLocation+'/'+asset.name+scaleSuffix+type;}else{return asset.httpServerLocation.replace(/\\.\\.\\//g,'_')+'/'+asset.name+scaleSuffix+type;}}export default class AssetSourceResolver{constructor(serverUrl,jsbundleUrl,asset){this.serverUrl=serverUrl||'https://expo.dev';this.jsbundleUrl=null;this.asset=asset;}isLoadedFromServer(){return true;}isLoadedFromFileSystem(){return false;}defaultAsset(){return this.assetServerURL();}assetServerURL(){const fromUrl=new URL(getScaledAssetPath(this.asset),this.serverUrl);fromUrl.searchParams.set('platform',\"web\");fromUrl.searchParams.set('hash',this.asset.hash);return this.fromSource(fromUrl.toString().replace(fromUrl.origin,''));}fromSource(source){return{__packager_asset:true,width:this.asset.width??undefined,height:this.asset.height??undefined,uri:source,scale:AssetSourceResolver.pickScale(this.asset.scales,PixelRatio.get())};}static pickScale(scales,deviceScale){for(let i=0;i<scales.length;i++){if(scales[i]>=deviceScale){return scales[i];}}return scales[scales.length-1]||1;}}","map":{"version":3,"names":["Platform","PixelRatio","getScaledAssetPath","asset","scale","AssetSourceResolver","pickScale","scales","get","scaleSuffix","type","httpServerLocation","name","replace","constructor","serverUrl","jsbundleUrl","isLoadedFromServer","isLoadedFromFileSystem","defaultAsset","assetServerURL","fromUrl","URL","searchParams","set","hash","fromSource","toString","origin","source","__packager_asset","width","undefined","height","uri","deviceScale","i","length"],"sources":["/home/user/rork-vibesync-458/node_modules/expo-image/src/utils/AssetSourceResolver.web.ts"],"sourcesContent":["import { PackagerAsset } from '@react-native/assets-registry/registry';\nimport { Platform } from 'expo-modules-core';\nimport { PixelRatio } from 'react-native';\n\nexport type ResolvedAssetSource = {\n  __packager_asset: boolean;\n  width?: number;\n  height?: number;\n  uri: string;\n  scale: number;\n};\n\n// Returns the Metro dev server-specific asset location.\nfunction getScaledAssetPath(asset: PackagerAsset): string {\n  const scale = AssetSourceResolver.pickScale(asset.scales, PixelRatio.get());\n  const scaleSuffix = scale === 1 ? '' : '@' + scale + 'x';\n  const type = !asset.type ? '' : `.${asset.type}`;\n  if (__DEV__) {\n    return asset.httpServerLocation + '/' + asset.name + scaleSuffix + type;\n  } else {\n    return asset.httpServerLocation.replace(/\\.\\.\\//g, '_') + '/' + asset.name + scaleSuffix + type;\n  }\n}\n\nexport default class AssetSourceResolver {\n  serverUrl: string;\n  // where the jsbundle is being run from\n  // NOTE(EvanBacon): Never defined on web.\n  jsbundleUrl?: string | null;\n  // the asset to resolve\n  asset: PackagerAsset;\n\n  constructor(\n    serverUrl: string | undefined | null,\n    jsbundleUrl: string | undefined | null,\n    asset: PackagerAsset\n  ) {\n    this.serverUrl = serverUrl || 'https://expo.dev';\n    this.jsbundleUrl = null;\n    this.asset = asset;\n  }\n\n  // Always true for web runtimes\n  isLoadedFromServer(): boolean {\n    return true;\n  }\n\n  // Always false for web runtimes\n  isLoadedFromFileSystem(): boolean {\n    return false;\n  }\n\n  defaultAsset(): ResolvedAssetSource {\n    return this.assetServerURL();\n  }\n\n  /**\n   * @returns absolute remote URL for the hosted asset.\n   */\n  assetServerURL(): ResolvedAssetSource {\n    const fromUrl = new URL(getScaledAssetPath(this.asset), this.serverUrl);\n    fromUrl.searchParams.set('platform', Platform.OS);\n    fromUrl.searchParams.set('hash', this.asset.hash);\n    return this.fromSource(\n      // Relative on web\n      fromUrl.toString().replace(fromUrl.origin, '')\n    );\n  }\n\n  fromSource(source: string): ResolvedAssetSource {\n    return {\n      __packager_asset: true,\n      width: this.asset.width ?? undefined,\n      height: this.asset.height ?? undefined,\n      uri: source,\n      scale: AssetSourceResolver.pickScale(this.asset.scales, PixelRatio.get()),\n    };\n  }\n\n  static pickScale(scales: number[], deviceScale: number): number {\n    for (let i = 0; i < scales.length; i++) {\n      if (scales[i] >= deviceScale) {\n        return scales[i];\n      }\n    }\n    return scales[scales.length - 1] || 1;\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}