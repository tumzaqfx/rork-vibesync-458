{"ast":null,"code":"import React from'react';import FlatList from\"react-native-web/dist/exports/FlatList\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import View from\"react-native-web/dist/exports/View\";import{router}from'expo-router';import{StoryCircle}from'./StoryCircle';import{LiveStoryCircle}from'./LiveStoryCircle';import{useStatus}from'@/hooks/status-store';import{useLiveStreaming}from'@/hooks/live-streaming-store';import{useSpill}from'@/hooks/spill-store';import SpillStatusCircle from'@/components/spill/SpillStatusCircle';import{jsx as _jsx}from\"react/jsx-runtime\";export const StoriesRow=({stories,onStoryPress,onCreateStory,testID})=>{const{statusGroups}=useStatus();const{liveSessions}=useLiveStreaming();const{activeSpills}=useSpill();const handleStatusPress=userId=>{router.push(`/status/view/${userId}`);};const combinedData=[...activeSpills.filter(spill=>spill.isLive).map(spill=>({id:`spill-${spill.id}`,type:'spill',spill})),...liveSessions.filter(session=>session.status==='live').map(session=>({id:`live-${session.id}`,type:'live',session})),...statusGroups.map(group=>({id:`status-${group.userId}`,type:'status',statusGroup:group})),...stories.map(story=>({id:`story-${story.id}`,type:'story',story}))];return _jsx(View,{style:styles.wrapper,testID:testID,children:_jsx(View,{style:styles.container,children:_jsx(FlatList,{data:combinedData,horizontal:true,showsHorizontalScrollIndicator:false,keyExtractor:item=>item.id,ListHeaderComponent:()=>_jsx(StoryCircle,{isYourStory:true,onPress:onCreateStory}),renderItem:({item})=>{if(item.type==='spill'){return _jsx(SpillStatusCircle,{id:item.spill.id,name:item.spill.hostName,avatar:item.spill.hostAvatar,topicName:item.spill.topicName,listenerCount:item.spill.listenerCount});}if(item.type==='live'){return _jsx(LiveStoryCircle,{session:item.session});}if(item.type==='status'){const group=item.statusGroup;return _jsx(StoryCircle,{story:{id:group.userId,userId:group.userId,username:group.username,profileImage:group.avatar,viewed:!group.hasUnviewed,author:{id:group.userId,username:group.username,displayName:group.username,profileImage:group.avatar,isVerified:group.verified},content:'',createdAt:group.lastStatusAt},onPress:()=>handleStatusPress(group.userId)});}return _jsx(StoryCircle,{story:item.story,onPress:()=>onStoryPress(item.story.id)});},contentContainerStyle:styles.contentContainer,snapToInterval:106,decelerationRate:\"fast\"})})});};const styles=StyleSheet.create({wrapper:{marginVertical:12},container:{paddingVertical:8},contentContainer:{paddingHorizontal:8,gap:4}});","map":{"version":3,"names":["React","FlatList","StyleSheet","View","router","StoryCircle","LiveStoryCircle","useStatus","useLiveStreaming","useSpill","SpillStatusCircle","jsx","_jsx","StoriesRow","stories","onStoryPress","onCreateStory","testID","statusGroups","liveSessions","activeSpills","handleStatusPress","userId","push","combinedData","filter","spill","isLive","map","id","type","session","status","group","statusGroup","story","style","styles","wrapper","children","container","data","horizontal","showsHorizontalScrollIndicator","keyExtractor","item","ListHeaderComponent","isYourStory","onPress","renderItem","name","hostName","avatar","hostAvatar","topicName","listenerCount","username","profileImage","viewed","hasUnviewed","author","displayName","isVerified","verified","content","createdAt","lastStatusAt","contentContainerStyle","contentContainer","snapToInterval","decelerationRate","create","marginVertical","paddingVertical","paddingHorizontal","gap"],"sources":["/home/user/rork-vibesync-458/components/home/StoriesRow.tsx"],"sourcesContent":["import React from 'react';\nimport { FlatList, StyleSheet, View } from 'react-native';\nimport { router } from 'expo-router';\nimport { StoryCircle } from './StoryCircle';\nimport { LiveStoryCircle } from './LiveStoryCircle';\nimport { Story } from '@/types';\nimport { useStatus } from '@/hooks/status-store';\nimport { useLiveStreaming } from '@/hooks/live-streaming-store';\nimport { useSpill } from '@/hooks/spill-store';\nimport { UserStatusGroup } from '@/types/status';\nimport SpillStatusCircle from '@/components/spill/SpillStatusCircle';\n\ninterface StoriesRowProps {\n  stories: Story[];\n  onStoryPress: (storyId: string) => void;\n  onCreateStory: () => void;\n  testID?: string;\n}\n\nexport const StoriesRow: React.FC<StoriesRowProps> = ({\n  stories,\n  onStoryPress,\n  onCreateStory,\n  testID,\n}) => {\n  const { statusGroups } = useStatus();\n  const { liveSessions } = useLiveStreaming();\n  const { activeSpills } = useSpill();\n\n  const handleStatusPress = (userId: string) => {\n    router.push(`/status/view/${userId}`);\n  };\n\n  const combinedData = [\n    ...activeSpills\n      .filter(spill => spill.isLive)\n      .map(spill => ({\n        id: `spill-${spill.id}`,\n        type: 'spill' as const,\n        spill,\n      })),\n    ...liveSessions\n      .filter(session => session.status === 'live')\n      .map(session => ({\n        id: `live-${session.id}`,\n        type: 'live' as const,\n        session,\n      })),\n    ...statusGroups.map(group => ({\n      id: `status-${group.userId}`,\n      type: 'status' as const,\n      statusGroup: group,\n    })),\n    ...stories.map(story => ({\n      id: `story-${story.id}`,\n      type: 'story' as const,\n      story,\n    })),\n  ];\n\n  return (\n    <View style={styles.wrapper} testID={testID}>\n      <View style={styles.container}>\n        <FlatList\n          data={combinedData}\n          horizontal\n          showsHorizontalScrollIndicator={false}\n          keyExtractor={(item) => item.id}\n          ListHeaderComponent={() => (\n            <StoryCircle isYourStory onPress={onCreateStory} />\n          )}\n          renderItem={({ item }) => {\n            if (item.type === 'spill') {\n              return (\n                <SpillStatusCircle\n                  id={item.spill!.id}\n                  name={item.spill!.hostName}\n                  avatar={item.spill!.hostAvatar}\n                  topicName={item.spill!.topicName}\n                  listenerCount={item.spill!.listenerCount}\n                />\n              );\n            }\n            if (item.type === 'live') {\n              return <LiveStoryCircle session={item.session!} />;\n            }\n            if (item.type === 'status') {\n              const group = item.statusGroup as UserStatusGroup;\n              return (\n                <StoryCircle\n                  story={{\n                    id: group.userId,\n                    userId: group.userId,\n                    username: group.username,\n                    profileImage: group.avatar,\n                    viewed: !group.hasUnviewed,\n                    author: {\n                      id: group.userId,\n                      username: group.username,\n                      displayName: group.username,\n                      profileImage: group.avatar,\n                      isVerified: group.verified,\n                    },\n                    content: '',\n                    createdAt: group.lastStatusAt,\n                  } as Story}\n                  onPress={() => handleStatusPress(group.userId)}\n                />\n              );\n            }\n            return (\n              <StoryCircle\n                story={item.story as Story}\n                onPress={() => onStoryPress(item.story!.id)}\n              />\n            );\n          }}\n          contentContainerStyle={styles.contentContainer}\n          snapToInterval={106}\n          decelerationRate=\"fast\"\n        />\n      </View>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  wrapper: {\n    marginVertical: 12,\n  },\n  container: {\n    paddingVertical: 8,\n  },\n  contentContainer: {\n    paddingHorizontal: 8,\n    gap: 4,\n  },\n});"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}