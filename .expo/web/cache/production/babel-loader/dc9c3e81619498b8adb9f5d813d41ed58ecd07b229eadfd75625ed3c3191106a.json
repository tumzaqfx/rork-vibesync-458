{"ast":null,"code":"import{isBlurhashString}from'../utils/resolveSources';export function getImageWrapperEventHandler(events,source){return{onLoad:event=>{events?.onLoad?.forEach(e=>e?.(event));if(true){window.requestAnimationFrame(()=>{events?.onDisplay?.forEach(e=>e?.());});}},onTransitionEnd:()=>events?.onTransitionEnd?.forEach(e=>e?.()),onError:()=>{if(source?.uri&&isBlurhashString(source?.uri)){return;}events?.onError?.forEach(e=>e?.({source:source||null}));}};}","map":{"version":3,"names":["isBlurhashString","getImageWrapperEventHandler","events","source","onLoad","event","forEach","e","window","requestAnimationFrame","onDisplay","onTransitionEnd","onError","uri"],"sources":["/home/user/rork-vibesync-458/node_modules/expo-image/src/web/getImageWrapperEventHandler.ts"],"sourcesContent":["import type { SyntheticEvent } from 'react';\n\nimport type { ImageWrapperEvents } from './ImageWrapper.types';\nimport type { ImageSource } from '../Image.types';\nimport { isBlurhashString } from '../utils/resolveSources';\n\nexport function getImageWrapperEventHandler(\n  events: ImageWrapperEvents | undefined,\n  source: ImageSource\n) {\n  return {\n    onLoad: (event: SyntheticEvent<HTMLImageElement, Event>) => {\n      events?.onLoad?.forEach((e) => e?.(event));\n\n      if (typeof window !== 'undefined') {\n        // On Web there is no way to detect when the image gets displayed, but we can assume it happens on the repaint right after the image is successfully loaded.\n        window.requestAnimationFrame(() => {\n          events?.onDisplay?.forEach((e) => e?.());\n        });\n      }\n    },\n    onTransitionEnd: () => events?.onTransitionEnd?.forEach((e) => e?.()),\n    onError: () => {\n      // A temporary workaround for blurhash blobs throwing opaque errors when used in an img tag.\n      if (source?.uri && isBlurhashString(source?.uri)) {\n        return;\n      }\n      events?.onError?.forEach((e) => e?.({ source: source || null }));\n    },\n  };\n}\n"],"mappings":"AAIA,OAASA,gBAAgB,KAAQ,yBAAyB,CAE1D,MAAO,SAAS,CAAAC,2BAA2BA,CACzCC,MAAsC,CACtCC,MAAmB,CACnB,CACA,MAAO,CACLC,MAAM,CAAGC,KAA8C,EAAK,CAC1DH,MAAM,EAAEE,MAAM,EAAEE,OAAO,CAAEC,CAAC,EAAKA,CAAC,GAAGF,KAAK,CAAC,CAAC,CAE1C,QAAmC,CAEjCG,MAAM,CAACC,qBAAqB,CAAC,IAAM,CACjCP,MAAM,EAAEQ,SAAS,EAAEJ,OAAO,CAAEC,CAAC,EAAKA,CAAC,GAAG,CAAC,CAAC,CAC1C,CAAC,CAAC,CACJ,CACF,CAAC,CACDI,eAAe,CAAEA,CAAA,GAAMT,MAAM,EAAES,eAAe,EAAEL,OAAO,CAAEC,CAAC,EAAKA,CAAC,GAAG,CAAC,CAAC,CACrEK,OAAO,CAAEA,CAAA,GAAM,CAEb,GAAIT,MAAM,EAAEU,GAAG,EAAIb,gBAAgB,CAACG,MAAM,EAAEU,GAAG,CAAC,CAAE,CAChD,OACF,CACAX,MAAM,EAAEU,OAAO,EAAEN,OAAO,CAAEC,CAAC,EAAKA,CAAC,GAAG,CAAEJ,MAAM,CAAEA,MAAM,EAAI,IAAK,CAAC,CAAC,CAAC,CAClE,CACF,CAAC,CACH","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}