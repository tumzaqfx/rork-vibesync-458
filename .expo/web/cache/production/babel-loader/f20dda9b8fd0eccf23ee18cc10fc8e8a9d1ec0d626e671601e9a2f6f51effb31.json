{"ast":null,"code":"import{CodedError}from'expo-modules-core';export function getContext(canvas){const ctx=canvas.getContext('2d');if(!ctx){throw new CodedError('ERR_IMAGE_MANIPULATOR','Failed to create canvas context');}return ctx;}export async function blobToBase64String(blob){const dataURL=await new Promise((resolve,reject)=>{const reader=new FileReader();reader.onloadend=()=>resolve(reader.result);reader.onerror=()=>reject(new Error(`Unable to convert blob to base64 string: ${reader.error}`));reader.readAsDataURL(blob);});return dataURL.replace(/^data:image\\/\\w+;base64,/,'');}export function loadImageAsync(uri){return new Promise((resolve,reject)=>{const imageSource=new Image();imageSource.crossOrigin='anonymous';const canvas=document.createElement('canvas');imageSource.onload=()=>{canvas.width=imageSource.naturalWidth;canvas.height=imageSource.naturalHeight;const context=getContext(canvas);context.drawImage(imageSource,0,0,imageSource.naturalWidth,imageSource.naturalHeight);resolve(canvas);};imageSource.onerror=()=>reject(canvas);imageSource.src=uri;});}","map":{"version":3,"names":["CodedError","getContext","canvas","ctx","blobToBase64String","blob","dataURL","Promise","resolve","reject","reader","FileReader","onloadend","result","onerror","Error","error","readAsDataURL","replace","loadImageAsync","uri","imageSource","Image","crossOrigin","document","createElement","onload","width","naturalWidth","height","naturalHeight","context","drawImage","src"],"sources":["/home/user/rork-vibesync-458/node_modules/expo-image-manipulator/src/web/utils.web.ts"],"sourcesContent":["import { CodedError } from 'expo-modules-core';\n\nexport function getContext(canvas: HTMLCanvasElement): CanvasRenderingContext2D {\n  const ctx = canvas.getContext('2d');\n  if (!ctx) {\n    throw new CodedError('ERR_IMAGE_MANIPULATOR', 'Failed to create canvas context');\n  }\n  return ctx;\n}\n\nexport async function blobToBase64String(blob: Blob): Promise<string> {\n  const dataURL = await new Promise<string>((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onloadend = () => resolve(reader.result as string);\n    reader.onerror = () =>\n      reject(new Error(`Unable to convert blob to base64 string: ${reader.error}`));\n    reader.readAsDataURL(blob);\n  });\n  return dataURL.replace(/^data:image\\/\\w+;base64,/, '');\n}\n\nexport function loadImageAsync(uri: string): Promise<HTMLCanvasElement> {\n  return new Promise((resolve, reject) => {\n    const imageSource = new Image();\n    imageSource.crossOrigin = 'anonymous';\n    const canvas = document.createElement('canvas');\n    imageSource.onload = () => {\n      canvas.width = imageSource.naturalWidth;\n      canvas.height = imageSource.naturalHeight;\n\n      const context = getContext(canvas);\n      context.drawImage(imageSource, 0, 0, imageSource.naturalWidth, imageSource.naturalHeight);\n\n      resolve(canvas);\n    };\n    imageSource.onerror = () => reject(canvas);\n    imageSource.src = uri;\n  });\n}\n"],"mappings":"AAAA,OAASA,UAAU,KAAQ,mBAAmB,CAE9C,MAAO,SAAS,CAAAC,UAAUA,CAACC,MAAyB,CAA4B,CAC9E,KAAM,CAAAC,GAAG,CAAGD,MAAM,CAACD,UAAU,CAAC,IAAI,CAAC,CACnC,GAAI,CAACE,GAAG,CAAE,CACR,KAAM,IAAI,CAAAH,UAAU,CAAC,uBAAuB,CAAE,iCAAiC,CAAC,CAClF,CACA,MAAO,CAAAG,GAAG,CACZ,CAEA,MAAO,eAAe,CAAAC,kBAAkBA,CAACC,IAAU,CAAmB,CACpE,KAAM,CAAAC,OAAO,CAAG,KAAM,IAAI,CAAAC,OAAO,CAAS,CAACC,OAAO,CAAEC,MAAM,GAAK,CAC7D,KAAM,CAAAC,MAAM,CAAG,GAAI,CAAAC,UAAU,CAAC,CAAC,CAC/BD,MAAM,CAACE,SAAS,CAAG,IAAMJ,OAAO,CAACE,MAAM,CAACG,MAAgB,CAAC,CACzDH,MAAM,CAACI,OAAO,CAAG,IACfL,MAAM,CAAC,GAAI,CAAAM,KAAK,CAAC,4CAA4CL,MAAM,CAACM,KAAK,EAAE,CAAC,CAAC,CAC/EN,MAAM,CAACO,aAAa,CAACZ,IAAI,CAAC,CAC5B,CAAC,CAAC,CACF,MAAO,CAAAC,OAAO,CAACY,OAAO,CAAC,0BAA0B,CAAE,EAAE,CAAC,CACxD,CAEA,MAAO,SAAS,CAAAC,cAAcA,CAACC,GAAW,CAA8B,CACtE,MAAO,IAAI,CAAAb,OAAO,CAAC,CAACC,OAAO,CAAEC,MAAM,GAAK,CACtC,KAAM,CAAAY,WAAW,CAAG,GAAI,CAAAC,KAAK,CAAC,CAAC,CAC/BD,WAAW,CAACE,WAAW,CAAG,WAAW,CACrC,KAAM,CAAArB,MAAM,CAAGsB,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC,CAC/CJ,WAAW,CAACK,MAAM,CAAG,IAAM,CACzBxB,MAAM,CAACyB,KAAK,CAAGN,WAAW,CAACO,YAAY,CACvC1B,MAAM,CAAC2B,MAAM,CAAGR,WAAW,CAACS,aAAa,CAEzC,KAAM,CAAAC,OAAO,CAAG9B,UAAU,CAACC,MAAM,CAAC,CAClC6B,OAAO,CAACC,SAAS,CAACX,WAAW,CAAE,CAAC,CAAE,CAAC,CAAEA,WAAW,CAACO,YAAY,CAAEP,WAAW,CAACS,aAAa,CAAC,CAEzFtB,OAAO,CAACN,MAAM,CAAC,CACjB,CAAC,CACDmB,WAAW,CAACP,OAAO,CAAG,IAAML,MAAM,CAACP,MAAM,CAAC,CAC1CmB,WAAW,CAACY,GAAG,CAAGb,GAAG,CACvB,CAAC,CAAC,CACJ","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}