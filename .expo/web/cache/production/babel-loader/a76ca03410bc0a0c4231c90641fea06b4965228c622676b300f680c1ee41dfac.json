{"ast":null,"code":"import _objectWithoutPropertiesLoose from\"@babel/runtime/helpers/objectWithoutPropertiesLoose\";const _excluded=[\"enabled\"];function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}import{State}from'../../State';import{DiagonalDirections,Directions}from'../../Directions';import GestureHandler from'./GestureHandler';import Vector from'../tools/Vector';import{coneToDeviation}from'../utils';const DEFAULT_MAX_DURATION_MS=800;const DEFAULT_MIN_VELOCITY=700;const DEFAULT_ALIGNMENT_CONE=30;const DEFAULT_DIRECTION=Directions.RIGHT;const DEFAULT_NUMBER_OF_TOUCHES_REQUIRED=1;const AXIAL_DEVIATION_COSINE=coneToDeviation(DEFAULT_ALIGNMENT_CONE);const DIAGONAL_DEVIATION_COSINE=coneToDeviation(90-DEFAULT_ALIGNMENT_CONE);export default class FlingGestureHandler extends GestureHandler{constructor(...args){super(...args);_defineProperty(this,\"numberOfPointersRequired\",DEFAULT_NUMBER_OF_TOUCHES_REQUIRED);_defineProperty(this,\"direction\",DEFAULT_DIRECTION);_defineProperty(this,\"maxDurationMs\",DEFAULT_MAX_DURATION_MS);_defineProperty(this,\"minVelocity\",DEFAULT_MIN_VELOCITY);_defineProperty(this,\"delayTimeout\",void 0);_defineProperty(this,\"maxNumberOfPointersSimultaneously\",0);_defineProperty(this,\"keyPointer\",NaN);}updateGestureConfig(_ref){let{enabled=true}=_ref,props=_objectWithoutPropertiesLoose(_ref,_excluded);super.updateGestureConfig(Object.assign({enabled:enabled},props));if(this.config.direction){this.direction=this.config.direction;}if(this.config.numberOfPointers){this.numberOfPointersRequired=this.config.numberOfPointers;}}startFling(){this.begin();this.maxNumberOfPointersSimultaneously=1;this.delayTimeout=setTimeout(()=>this.fail(),this.maxDurationMs);}tryEndFling(){const velocityVector=Vector.fromVelocity(this.tracker,this.keyPointer);const getAlignment=(direction,minimalAlignmentCosine)=>{return(direction&this.direction)===direction&&velocityVector.isSimilar(Vector.fromDirection(direction),minimalAlignmentCosine);};const axialDirectionsList=Object.values(Directions);const diagonalDirectionsList=Object.values(DiagonalDirections);const axialAlignmentList=axialDirectionsList.map(direction=>getAlignment(direction,AXIAL_DEVIATION_COSINE));const diagonalAlignmentList=diagonalDirectionsList.map(direction=>getAlignment(direction,DIAGONAL_DEVIATION_COSINE));const isAligned=axialAlignmentList.some(Boolean)||diagonalAlignmentList.some(Boolean);const isFast=velocityVector.magnitude>this.minVelocity;if(this.maxNumberOfPointersSimultaneously===this.numberOfPointersRequired&&isAligned&&isFast){clearTimeout(this.delayTimeout);this.activate();return true;}return false;}endFling(){if(!this.tryEndFling()){this.fail();}}onPointerDown(event){if(!this.isButtonInConfig(event.button)){return;}this.tracker.addToTracker(event);this.keyPointer=event.pointerId;super.onPointerDown(event);this.newPointerAction();this.tryToSendTouchEvent(event);}onPointerAdd(event){this.tracker.addToTracker(event);super.onPointerAdd(event);this.newPointerAction();}newPointerAction(){if(this.state===State.UNDETERMINED){this.startFling();}if(this.state!==State.BEGAN){return;}this.tryEndFling();if(this.tracker.trackedPointersCount>this.maxNumberOfPointersSimultaneously){this.maxNumberOfPointersSimultaneously=this.tracker.trackedPointersCount;}}pointerMoveAction(event){this.tracker.track(event);if(this.state!==State.BEGAN){return;}this.tryEndFling();}onPointerMove(event){this.pointerMoveAction(event);super.onPointerMove(event);}onPointerOutOfBounds(event){this.pointerMoveAction(event);super.onPointerOutOfBounds(event);}onPointerUp(event){super.onPointerUp(event);this.onUp(event);this.keyPointer=NaN;}onPointerRemove(event){super.onPointerRemove(event);this.onUp(event);}onUp(event){if(this.state===State.BEGAN){this.endFling();}this.tracker.removeFromTracker(event.pointerId);}activate(force){super.activate(force);this.end();}resetConfig(){super.resetConfig();this.numberOfPointersRequired=DEFAULT_NUMBER_OF_TOUCHES_REQUIRED;this.direction=DEFAULT_DIRECTION;}}","map":{"version":3,"names":["State","DiagonalDirections","Directions","GestureHandler","Vector","coneToDeviation","DEFAULT_MAX_DURATION_MS","DEFAULT_MIN_VELOCITY","DEFAULT_ALIGNMENT_CONE","DEFAULT_DIRECTION","RIGHT","DEFAULT_NUMBER_OF_TOUCHES_REQUIRED","AXIAL_DEVIATION_COSINE","DIAGONAL_DEVIATION_COSINE","FlingGestureHandler","constructor","args","_defineProperty","NaN","updateGestureConfig","_ref","enabled","props","_objectWithoutPropertiesLoose","_excluded","Object","assign","config","direction","numberOfPointers","numberOfPointersRequired","startFling","begin","maxNumberOfPointersSimultaneously","delayTimeout","setTimeout","fail","maxDurationMs","tryEndFling","velocityVector","fromVelocity","tracker","keyPointer","getAlignment","minimalAlignmentCosine","isSimilar","fromDirection","axialDirectionsList","values","diagonalDirectionsList","axialAlignmentList","map","diagonalAlignmentList","isAligned","some","Boolean","isFast","magnitude","minVelocity","clearTimeout","activate","endFling","onPointerDown","event","isButtonInConfig","button","addToTracker","pointerId","newPointerAction","tryToSendTouchEvent","onPointerAdd","state","UNDETERMINED","BEGAN","trackedPointersCount","pointerMoveAction","track","onPointerMove","onPointerOutOfBounds","onPointerUp","onUp","onPointerRemove","removeFromTracker","force","end","resetConfig"],"sources":["/home/user/rork-vibesync-458/node_modules/react-native-gesture-handler/lib/module/web/handlers/FlingGestureHandler.ts"],"sourcesContent":["import { State } from '../../State';\nimport { DiagonalDirections, Directions } from '../../Directions';\nimport { AdaptedEvent, Config } from '../interfaces';\n\nimport GestureHandler from './GestureHandler';\nimport Vector from '../tools/Vector';\nimport { coneToDeviation } from '../utils';\n\nconst DEFAULT_MAX_DURATION_MS = 800;\nconst DEFAULT_MIN_VELOCITY = 700;\nconst DEFAULT_ALIGNMENT_CONE = 30;\nconst DEFAULT_DIRECTION = Directions.RIGHT;\nconst DEFAULT_NUMBER_OF_TOUCHES_REQUIRED = 1;\n\nconst AXIAL_DEVIATION_COSINE = coneToDeviation(DEFAULT_ALIGNMENT_CONE);\nconst DIAGONAL_DEVIATION_COSINE = coneToDeviation(90 - DEFAULT_ALIGNMENT_CONE);\n\nexport default class FlingGestureHandler extends GestureHandler {\n  private numberOfPointersRequired = DEFAULT_NUMBER_OF_TOUCHES_REQUIRED;\n  private direction: Directions = DEFAULT_DIRECTION;\n\n  private maxDurationMs = DEFAULT_MAX_DURATION_MS;\n  private minVelocity = DEFAULT_MIN_VELOCITY;\n  private delayTimeout!: number;\n\n  private maxNumberOfPointersSimultaneously = 0;\n  private keyPointer = NaN;\n\n  public updateGestureConfig({ enabled = true, ...props }: Config): void {\n    super.updateGestureConfig({ enabled: enabled, ...props });\n\n    if (this.config.direction) {\n      this.direction = this.config.direction;\n    }\n\n    if (this.config.numberOfPointers) {\n      this.numberOfPointersRequired = this.config.numberOfPointers;\n    }\n  }\n\n  private startFling(): void {\n    this.begin();\n\n    this.maxNumberOfPointersSimultaneously = 1;\n\n    this.delayTimeout = setTimeout(() => this.fail(), this.maxDurationMs);\n  }\n\n  private tryEndFling(): boolean {\n    const velocityVector = Vector.fromVelocity(this.tracker, this.keyPointer);\n\n    const getAlignment = (\n      direction: Directions | DiagonalDirections,\n      minimalAlignmentCosine: number\n    ) => {\n      return (\n        (direction & this.direction) === direction &&\n        velocityVector.isSimilar(\n          Vector.fromDirection(direction),\n          minimalAlignmentCosine\n        )\n      );\n    };\n\n    const axialDirectionsList = Object.values(Directions);\n    const diagonalDirectionsList = Object.values(DiagonalDirections);\n\n    // List of alignments to all activated directions\n    const axialAlignmentList = axialDirectionsList.map((direction) =>\n      getAlignment(direction, AXIAL_DEVIATION_COSINE)\n    );\n\n    const diagonalAlignmentList = diagonalDirectionsList.map((direction) =>\n      getAlignment(direction, DIAGONAL_DEVIATION_COSINE)\n    );\n\n    const isAligned =\n      axialAlignmentList.some(Boolean) || diagonalAlignmentList.some(Boolean);\n\n    const isFast = velocityVector.magnitude > this.minVelocity;\n\n    if (\n      this.maxNumberOfPointersSimultaneously ===\n        this.numberOfPointersRequired &&\n      isAligned &&\n      isFast\n    ) {\n      clearTimeout(this.delayTimeout);\n      this.activate();\n\n      return true;\n    }\n\n    return false;\n  }\n\n  private endFling() {\n    if (!this.tryEndFling()) {\n      this.fail();\n    }\n  }\n\n  protected onPointerDown(event: AdaptedEvent): void {\n    if (!this.isButtonInConfig(event.button)) {\n      return;\n    }\n\n    this.tracker.addToTracker(event);\n    this.keyPointer = event.pointerId;\n\n    super.onPointerDown(event);\n    this.newPointerAction();\n\n    this.tryToSendTouchEvent(event);\n  }\n\n  protected onPointerAdd(event: AdaptedEvent): void {\n    this.tracker.addToTracker(event);\n    super.onPointerAdd(event);\n    this.newPointerAction();\n  }\n\n  private newPointerAction(): void {\n    if (this.state === State.UNDETERMINED) {\n      this.startFling();\n    }\n\n    if (this.state !== State.BEGAN) {\n      return;\n    }\n\n    this.tryEndFling();\n\n    if (\n      this.tracker.trackedPointersCount > this.maxNumberOfPointersSimultaneously\n    ) {\n      this.maxNumberOfPointersSimultaneously =\n        this.tracker.trackedPointersCount;\n    }\n  }\n\n  private pointerMoveAction(event: AdaptedEvent): void {\n    this.tracker.track(event);\n\n    if (this.state !== State.BEGAN) {\n      return;\n    }\n\n    this.tryEndFling();\n  }\n\n  protected onPointerMove(event: AdaptedEvent): void {\n    this.pointerMoveAction(event);\n    super.onPointerMove(event);\n  }\n\n  protected onPointerOutOfBounds(event: AdaptedEvent): void {\n    this.pointerMoveAction(event);\n    super.onPointerOutOfBounds(event);\n  }\n\n  protected onPointerUp(event: AdaptedEvent): void {\n    super.onPointerUp(event);\n    this.onUp(event);\n\n    this.keyPointer = NaN;\n  }\n\n  protected onPointerRemove(event: AdaptedEvent): void {\n    super.onPointerRemove(event);\n    this.onUp(event);\n  }\n\n  private onUp(event: AdaptedEvent): void {\n    if (this.state === State.BEGAN) {\n      this.endFling();\n    }\n\n    this.tracker.removeFromTracker(event.pointerId);\n  }\n\n  public activate(force?: boolean): void {\n    super.activate(force);\n    this.end();\n  }\n\n  protected resetConfig(): void {\n    super.resetConfig();\n    this.numberOfPointersRequired = DEFAULT_NUMBER_OF_TOUCHES_REQUIRED;\n    this.direction = DEFAULT_DIRECTION;\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}