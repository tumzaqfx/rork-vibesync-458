{"ast":null,"code":"\"use strict\";import*as React from'react';import Platform from\"react-native-web/dist/exports/Platform\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import{useSafeAreaFrame}from'react-native-safe-area-context';import useLatestCallback from'use-latest-callback';import{useSyncExternalStoreWithSelector}from'use-sync-external-store/with-selector';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const SafeAreaListener=require('react-native-safe-area-context').SafeAreaListener;const FrameContext=React.createContext(undefined);export function useFrameSize(selector,throttle){const context=React.useContext(FrameContext);if(context==null){throw new Error('useFrameSize must be used within a FrameSizeProvider');}const value=useSyncExternalStoreWithSelector(throttle?context.subscribeThrottled:context.subscribe,context.getCurrent,context.getCurrent,selector);return value;}export function FrameSizeProvider({initialFrame,children}){const context=React.useContext(FrameContext);if(context!=null){return children;}return _jsx(FrameSizeProviderInner,{initialFrame:initialFrame,children:children});}function FrameSizeProviderInner({initialFrame,children}){const frameRef=React.useRef({width:initialFrame.width,height:initialFrame.height});const listeners=React.useRef(new Set());const getCurrent=useLatestCallback(()=>frameRef.current);const subscribe=useLatestCallback(listener=>{listeners.current.add(listener);return()=>{listeners.current.delete(listener);};});const subscribeThrottled=useLatestCallback(listener=>{const delay=100;let timer;let updated=false;let waiting=false;const throttledListener=()=>{clearTimeout(timer);updated=true;if(waiting){timer=setTimeout(()=>{if(updated){updated=false;listener();}},delay);}else{waiting=true;setTimeout(function(){waiting=false;},delay);updated=false;listener();}};const unsubscribe=subscribe(throttledListener);return()=>{unsubscribe();clearTimeout(timer);};});const context=React.useMemo(()=>({getCurrent,subscribe,subscribeThrottled}),[subscribe,subscribeThrottled,getCurrent]);const onChange=useLatestCallback(frame=>{if(frameRef.current.height===frame.height&&frameRef.current.width===frame.width){return;}frameRef.current={width:frame.width,height:frame.height};listeners.current.forEach(listener=>listener());});return _jsxs(_Fragment,{children:[true?_jsx(FrameSizeListenerWeb,{onChange:onChange}):typeof SafeAreaListener==='undefined'?_jsx(FrameSizeListenerNativeFallback,{onChange:onChange}):_jsx(SafeAreaListener,{onChange:({frame})=>onChange(frame),style:StyleSheet.absoluteFill}),_jsx(FrameContext.Provider,{value:context,children:children})]});}function FrameSizeListenerNativeFallback({onChange}){const frame=useSafeAreaFrame();React.useLayoutEffect(()=>{onChange(frame);},[frame,onChange]);return null;}function FrameSizeListenerWeb({onChange}){const elementRef=React.useRef(null);React.useEffect(()=>{if(elementRef.current==null){return;}const rect=elementRef.current.getBoundingClientRect();onChange({width:rect.width,height:rect.height});const observer=new ResizeObserver(entries=>{const entry=entries[0];if(entry){const{width,height}=entry.contentRect;onChange({width,height});}});observer.observe(elementRef.current);return()=>{observer.disconnect();};},[onChange]);return _jsx(\"div\",{ref:elementRef,style:Object.assign({},StyleSheet.absoluteFillObject,{pointerEvents:'none',visibility:'hidden'})});}","map":{"version":3,"names":["React","Platform","StyleSheet","useSafeAreaFrame","useLatestCallback","useSyncExternalStoreWithSelector","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","SafeAreaListener","require","FrameContext","createContext","undefined","useFrameSize","selector","throttle","context","useContext","Error","value","subscribeThrottled","subscribe","getCurrent","FrameSizeProvider","initialFrame","children","FrameSizeProviderInner","frameRef","useRef","width","height","listeners","Set","current","listener","add","delete","delay","timer","updated","waiting","throttledListener","clearTimeout","setTimeout","unsubscribe","useMemo","onChange","frame","forEach","FrameSizeListenerWeb","FrameSizeListenerNativeFallback","style","absoluteFill","Provider","useLayoutEffect","elementRef","useEffect","rect","getBoundingClientRect","observer","ResizeObserver","entries","entry","contentRect","observe","disconnect","ref","Object","assign","absoluteFillObject","pointerEvents","visibility"],"sources":["/home/user/rork-vibesync-458/node_modules/@react-navigation/elements/src/useFrameSize.tsx"],"sourcesContent":["import * as React from 'react';\nimport {\n  Platform,\n  type StyleProp,\n  StyleSheet,\n  type ViewStyle,\n} from 'react-native';\nimport {\n  // eslint-disable-next-line no-restricted-imports\n  useSafeAreaFrame,\n} from 'react-native-safe-area-context';\nimport useLatestCallback from 'use-latest-callback';\nimport { useSyncExternalStoreWithSelector } from 'use-sync-external-store/with-selector';\n\n// Load with require to avoid error from webpack due to missing export in older versions\n// eslint-disable-next-line import-x/no-commonjs\nconst SafeAreaListener = require('react-native-safe-area-context')\n  .SafeAreaListener as\n  | typeof import('react-native-safe-area-context').SafeAreaListener\n  | undefined;\n\ntype Frame = {\n  width: number;\n  height: number;\n};\n\ntype Listener = () => void;\n\ntype RemoveListener = () => void;\n\ntype FrameContextType = {\n  getCurrent: () => Frame;\n  subscribe: (listener: Listener) => RemoveListener;\n  subscribeThrottled: (listener: Listener) => RemoveListener;\n};\n\nconst FrameContext = React.createContext<FrameContextType | undefined>(\n  undefined\n);\n\nexport function useFrameSize<T>(\n  selector: (frame: Frame) => T,\n  throttle?: boolean\n): T {\n  const context = React.useContext(FrameContext);\n\n  if (context == null) {\n    throw new Error('useFrameSize must be used within a FrameSizeProvider');\n  }\n\n  const value = useSyncExternalStoreWithSelector(\n    throttle ? context.subscribeThrottled : context.subscribe,\n    context.getCurrent,\n    context.getCurrent,\n    selector\n  );\n\n  return value;\n}\n\ntype FrameSizeProviderProps = {\n  initialFrame: Frame;\n  children: React.ReactNode;\n  style?: StyleProp<ViewStyle>;\n};\n\nexport function FrameSizeProvider({\n  initialFrame,\n  children,\n}: FrameSizeProviderProps) {\n  const context = React.useContext(FrameContext);\n\n  if (context != null) {\n    // If the context is already present, don't wrap again\n    return children;\n  }\n\n  return (\n    <FrameSizeProviderInner initialFrame={initialFrame}>\n      {children}\n    </FrameSizeProviderInner>\n  );\n}\n\nfunction FrameSizeProviderInner({\n  initialFrame,\n  children,\n}: FrameSizeProviderProps) {\n  const frameRef = React.useRef<Frame>({\n    width: initialFrame.width,\n    height: initialFrame.height,\n  });\n\n  const listeners = React.useRef<Set<Listener>>(new Set());\n\n  const getCurrent = useLatestCallback(() => frameRef.current);\n\n  const subscribe = useLatestCallback((listener: Listener): RemoveListener => {\n    listeners.current.add(listener);\n\n    return () => {\n      listeners.current.delete(listener);\n    };\n  });\n\n  const subscribeThrottled = useLatestCallback(\n    (listener: Listener): RemoveListener => {\n      const delay = 100; // Throttle delay in milliseconds\n\n      let timer: ReturnType<typeof setTimeout>;\n      let updated = false;\n      let waiting = false;\n\n      const throttledListener = () => {\n        clearTimeout(timer);\n\n        updated = true;\n\n        if (waiting) {\n          // Schedule a timer to call the listener at the end\n          timer = setTimeout(() => {\n            if (updated) {\n              updated = false;\n              listener();\n            }\n          }, delay);\n        } else {\n          waiting = true;\n          setTimeout(function () {\n            waiting = false;\n          }, delay);\n\n          // Call the listener immediately at start\n          updated = false;\n          listener();\n        }\n      };\n\n      const unsubscribe = subscribe(throttledListener);\n\n      return () => {\n        unsubscribe();\n        clearTimeout(timer);\n      };\n    }\n  );\n\n  const context = React.useMemo<FrameContextType>(\n    () => ({\n      getCurrent,\n      subscribe,\n      subscribeThrottled,\n    }),\n    [subscribe, subscribeThrottled, getCurrent]\n  );\n\n  const onChange = useLatestCallback((frame: Frame) => {\n    if (\n      frameRef.current.height === frame.height &&\n      frameRef.current.width === frame.width\n    ) {\n      return;\n    }\n\n    frameRef.current = { width: frame.width, height: frame.height };\n    listeners.current.forEach((listener) => listener());\n  });\n\n  return (\n    <>\n      {Platform.OS === 'web' ? (\n        <FrameSizeListenerWeb onChange={onChange} />\n      ) : typeof SafeAreaListener === 'undefined' ? (\n        <FrameSizeListenerNativeFallback onChange={onChange} />\n      ) : (\n        <SafeAreaListener\n          onChange={({ frame }) => onChange(frame)}\n          style={StyleSheet.absoluteFill}\n        />\n      )}\n      <FrameContext.Provider value={context}>{children}</FrameContext.Provider>\n    </>\n  );\n}\n\n// SafeAreaListener is available only on newer versions\n// Fallback to an effect-based shim for older versions\nfunction FrameSizeListenerNativeFallback({\n  onChange,\n}: {\n  onChange: (frame: Frame) => void;\n}) {\n  const frame = useSafeAreaFrame();\n\n  React.useLayoutEffect(() => {\n    onChange(frame);\n  }, [frame, onChange]);\n\n  return null;\n}\n\n// FIXME: On the Web, the safe area frame value doesn't update on resize\n// So we workaround this by measuring the frame on resize\nfunction FrameSizeListenerWeb({\n  onChange,\n}: {\n  onChange: (frame: Frame) => void;\n}) {\n  const elementRef = React.useRef<HTMLDivElement>(null);\n\n  React.useEffect(() => {\n    if (elementRef.current == null) {\n      return;\n    }\n\n    const rect = elementRef.current.getBoundingClientRect();\n\n    onChange({\n      width: rect.width,\n      height: rect.height,\n    });\n\n    const observer = new ResizeObserver((entries) => {\n      const entry = entries[0];\n\n      if (entry) {\n        const { width, height } = entry.contentRect;\n\n        onChange({ width, height });\n      }\n    });\n\n    observer.observe(elementRef.current);\n\n    return () => {\n      observer.disconnect();\n    };\n  }, [onChange]);\n\n  return (\n    <div\n      ref={elementRef}\n      style={{\n        ...StyleSheet.absoluteFillObject,\n        pointerEvents: 'none',\n        visibility: 'hidden',\n      }}\n    />\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}